(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-486ebff2"],{1746:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.size},[a("div",{staticClass:"form-group row nopadding"},[a("div",{staticClass:"nopadding",class:e.label_size},[a("div",{staticClass:"filter-title"},[a("label",{staticClass:"control-label",attrs:{for:e.id}},[e._v(e._s(e.label))])])]),a("div",{staticClass:"nopadding",class:e.input_size},[a("DatePicker",{attrs:{type:e.type,name:e.name,id:e.id,"value-type":"format",placeholder:e.label},on:{input:function(t){return e.input()}},model:{value:e.dateVal,callback:function(t){e.dateVal=t},expression:"dateVal"}})],1)])])},r=[],i={name:"filter_input_field",data:function(){return{dateVal:""}},props:{label:{type:String,default:"請傳入label"},name:{type:String,default:"請傳入name"},id:{type:String,default:""},size:{type:String,default:"col-md-3"},label_size:{type:String,default:"col-5"},input_size:{type:String,default:"col-5"},type:{type:String,default:"date"},value:{type:String,default:""}},methods:{input:function(){this.$emit("input",this.dateVal)}}},s=i,l=a("2877"),o=Object(l["a"])(s,n,r,!1,null,null,null);t["a"]=o.exports},"38f5":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-group",class:e.get_classes()},[e.label&&e.label.length?a("label",{staticClass:"control-label",class:e.get_label_class(),staticStyle:{"":":before"},on:{click:function(t){e.clickable_label&&e.$emit("label-click")}}},[e._v(" "+e._s(e.label)+" ")]):e._e(),e._t("default")],2)},r=[],i={name:"tc_form_group",props:{hasError:{type:Boolean,default:!1},required:{type:Boolean,default:!1},grid_col_md_2:{type:Boolean,default:!1},label:{type:String,default:""},clickable_label:{type:Boolean,default:!1}},methods:{get_classes:function(){return{"has-error":this.hasError,"has-custom-error":this.hasError,required:this.required,"grid-col-md-2":this.grid_col_md_2,"not-required":!this.required}},get_label_class:function(){return{"as-link":this.clickable_label}}}},s=i,l=(a("97c0"),a("2877")),o=Object(l["a"])(s,n,r,!1,null,null,null);t["a"]=o.exports},"3a9e":function(e,t,a){"use strict";a("61d1")},"3ea2":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.size},[a("div",{staticClass:"form-group row nopadding"},[a("div",{staticClass:"nopadding",class:e.label_size},[a("div",{staticClass:"filter-title"},[a("label",{staticClass:"control-label",attrs:{for:e.id}},[e._v(e._s(e.label))])])]),a("div",{staticClass:"nopadding",class:e.input_size},[a("input",{staticClass:"form-control",attrs:{type:e.type,name:e.name,placeholder:e.label,maxlength:e.maxlength,id:e.id},domProps:{value:e.value},on:{input:function(t){return e.input(t)}}})])])])},r=[],i=(a("ac1f"),a("466d"),a("5319"),{name:"filter_input_field",props:{label:{type:String,default:"請傳入label"},name:{type:String,default:"請傳入name"},id:{type:String,default:""},size:{type:String,default:"col-3"},label_size:{type:String,default:"col-5"},input_size:{type:String,default:"col-5"},type:{type:String,default:"text"},value:{type:String,default:""},maxlength:{type:String,default:""},only_number:{type:Boolean,default:!1},only_big_en_and_number:{type:Boolean,default:!1}},methods:{input:function(e){if(this.only_number){var t=e.target.value,a=t.match(/[\d]+/g);$(e.target).val(a?a[0]:"")}else if(this.only_big_en){var n=e.target.value;$(e.target).val(n.replace(/[^\w\/]/gi,"").toUpperCase())}this.$emit("input",e.target.value)}}}),s=i,l=a("2877"),o=Object(l["a"])(s,n,r,!1,null,null,null);t["a"]=o.exports},4264:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.size},[a("div",{staticClass:"form-group row nopadding"},[a("div",{staticClass:"nopadding",class:e.label_size},[a("div",{staticClass:"filter-title"},[a("label",{staticClass:"control-label",attrs:{for:e.id}},[e._v(e._s(e.label))])])]),a("div",{staticClass:"nopadding",class:e.input_size},[a("select",{staticClass:"form-select",attrs:{id:e.id,name:e.name},on:{change:function(t){return e.$emit("input",t.target.value)}}},e._l(e.options,(function(t,n){return a("option",{key:n,domProps:{value:t.value}},[e._v(" "+e._s(t.option||t.name||t.text)+" ")])})),0)])])])},r=[],i={name:"filter_select_field",props:{label:{type:String,default:"請傳入Label"},name:{type:String,default:"請傳入Name"},id:{type:String,default:"id"+void 0},options:{type:Array,default:[{value:0,option:"test"}]},size:{type:String,default:"col-3"},label_size:{type:String,default:"col-5"},input_size:{type:String,default:"col-5"}}},s=i,l=a("2877"),o=Object(l["a"])(s,n,r,!1,null,null,null);t["a"]=o.exports},"5fec":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"modal",staticClass:"modal fade",attrs:{"data-bs-backdrop":"false","data-bs-keyboard":"false",tabindex:"-1"}},[a("div",{staticClass:"modal-dialog modal-lg",style:e.get_dialog_style()},[a("div",{staticClass:"modal-content watermark-container"},[a("WaterMarker"),a("div",{staticClass:"modal-header"},[e._t("header",(function(){return[a("span",{staticClass:"modal-title"},[e._v(" "+e._s(e.title)+" ")])]}))],2),a("div",{ref:"modal_body",staticClass:"modal-body",style:e.get_modal_body_style()},[a("input",{staticStyle:{display:"none"}}),a("input",{staticStyle:{display:"none"},attrs:{type:"password"}}),e._t("body")],2),a("div",{staticClass:"modal-footer"},[e._t("footer",(function(){return[a("button",{staticClass:"btn btn-new4",on:{click:function(t){return e.hide()}}},[e._v(" 離開 ")])]}))],2)],1)]),e._t("default")],2)},r=[],i=(a("d3b7"),a("a847")),s={name:"tc-modal",components:{WaterMarker:i["a"]},data:function(){return{p_resolve:null}},model:{prop:"value",event:"change"},props:{title:{type:String,default:"未獲取Tittle"},dialogStyle:Object,modalBodyStyle:Object,body_min_height:{type:String,default:"680px"},dialog_width:{type:String,default:"1600px"}},created:function(){},computed:{},methods:{get_dialog_style:function(){return Object.assign({"max-width":this.dialog_width},this.dialogStyle)},get_modal_body_style:function(){return Object.assign({"min-height":this.body_min_height,"max-height":"680px"},this.modalBodyStyle)},show:function(){var e=this,t=$(this.$refs.modal);return t.modal("show"),SysUI.set_backdrop(t,!0),$(this.$refs.modal_body).scrollTop(0),new Promise((function(t){return e.p_resolve=t}))},hide:function(e){$(this.$refs.modal).modal("hide"),this.p_resolve(e)}}},l=s,o=a("2877"),c=Object(o["a"])(l,n,r,!1,null,null,null);t["a"]=c.exports},"61d1":function(e,t,a){},7684:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"accmanage"},[a("div",{staticClass:"vc-panel",attrs:{id:"main-panel"}},[a("div",{staticClass:"vc-panel-heading"},[a("span",{staticClass:"vc-panel-title"},[e._v("職位管理")]),a("div",{staticClass:"pull-right"},[a("button",{staticClass:"btn btn-new",attrs:{id:"AccManagement_AccManage_Btn_CreateAcc"},on:{click:e.createDepartment}},[e._v(" 新增職位 ")])])]),a("div",{staticClass:"vc-panel-body"},[a("form",{staticClass:"vc-panel-body-search watermark-container",attrs:{id:"search-panel"}},[a("WaterMark"),a("div",{staticClass:"subTitle",staticStyle:{"justify-content":"space-between"}},[e._v(" 選擇搜尋條件 ")]),a("div",{staticClass:"vc-panel-body-search-row row row-cols-4 gx-0 gy-1"},[a("FilterSelectField",{attrs:{label:"部門",name:"filter_department",id:"id_department",options:e.Department},model:{value:e.filters.user_department_id,callback:function(t){e.$set(e.filters,"user_department_id",t)},expression:"filters.user_department_id"}}),a("FilterInputField",{attrs:{label:"職位名稱",name:"filter_name",id:"id_name"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}}),a("FilterInputField",{attrs:{label:"職位編號",name:"filter_position_no",id:"id_position_no"},model:{value:e.filters.position_no,callback:function(t){e.$set(e.filters,"position_no",t)},expression:"filters.position_no"}})],1),a("div",{staticClass:"vc-panel-body-search-row row g-0"},[a("div",{staticClass:"col text-end"},[a("button",{staticClass:"btn btn-primary",staticStyle:{"margin-right":"4px"},attrs:{type:"button"},on:{click:function(t){return e.search()}}},[e._v(" 搜尋 ")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"reset"}},[e._v(" 重置 ")])])])],1),a("div",{staticClass:"vc-panel-body-list",attrs:{id:"list-panel"}},[a("div",{staticClass:"subTitle",staticStyle:{"justify-content":"space-between"}},[e._v(" 檢視搜尋結果 "),a("div",{staticClass:"text-end"},[a("button",{staticClass:"btn btn-new5",staticStyle:{"margin-left":"4px"},on:{click:e.select_display_fields}},[e._v(" 篩選顯示 ")]),a("button",{staticClass:"btn btn-new2",staticStyle:{"margin-left":"4px"}},[e._v(" 列印 ")]),a("button",{staticClass:"btn btn-new3",staticStyle:{"margin-left":"4px"}},[e._v(" 匯出EXCEL ")])])]),a("div",{staticClass:"vc-panel-body-list-table"},[a("div",{staticClass:"table-container watermark-container"},[a("WaterMark"),a("div",{ref:"thead",staticClass:"table-responsive nopadding thead"},[a("table",{staticClass:"table table-bordered"},[a("thead",[a("tr",{staticClass:"table-title-bar"},[a("th",{staticClass:"text-center field-scale-1"},[e._v(" 操作 ")]),e._l(e.filter_fields,(function(t){return a("th",{key:t.key,staticClass:"text-center",class:"field-scale-"+t.scale},[e._v(" "+e._s(t.label)+" ")])}))],2)])])]),a("div",{ref:"tbody",staticClass:"table-responsive nopadding tbody",on:{scroll:function(t){return e.sync_thead_scroll()}}},[a("table",{staticClass:"table table-bordered table-hover"},[a("tbody",e._l(e.list,(function(t,n){return a("tr",{key:n,class:{selectedTr:e.selected_index.includes(n)},on:{click:function(t){return e.handle_acitve_tr(n)}}},[a("td",{staticClass:"text-center field-scale-1"},[a("button",{staticClass:"btn btn-w btn-mr4",attrs:{type:"button"},on:{click:function(a){return e.editDepartment(t.user_position_id)}}},[e._v(" 修改 ")])]),e._l(e.filter_fields,(function(n){return a("td",{key:n.key,staticClass:"text-left",class:"field-scale-"+n.scale},[a("span",{class:{"text-danger":"有效"==t[n.key]}},[e._v(" "+e._s(t[n.key])+" ")])])}))],2)})),0)])])],1)])])]),a("Pagination",{ref:"page",on:{searchService:e.pageSearch}})],1),a("div",[a("DisplayColumn",{ref:"displayColumn",attrs:{fields:e.fields},on:{hidden_fields:e.getHiddenFields}}),a("EditForm",{ref:"editForm"})],1)])},r=[],i=a("1da1"),s=a("5530"),l=a("2909"),o=(a("96cf"),a("d3b7"),a("159b"),a("caad"),a("2532"),a("99af"),a("ac1f"),a("841c"),a("a434"),a("3ea2")),c=a("1746"),d=a("4264"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("TCModal",{ref:"modal",attrs:{id:"edit_form",title:e.UI.title,body_min_height:"fit-content",dialog_width:"90vw"},scopedSlots:e._u([{key:"body",fn:function(){return[a("div",{staticClass:"align-items-center row"},[a("div",{staticClass:"col-4 row"},[a("TCFormGroup",{staticClass:"col-3",attrs:{label:"部門",required:""}}),a("TCFormGroup",{staticClass:"col-9",attrs:{required:""}},[a("TCDropdown",{attrs:{options:e.department_options,emptyValue:{value:"",text:""},required:""},model:{value:e.records.user_department_id,callback:function(t){e.$set(e.records,"user_department_id",t)},expression:"records.user_department_id"}})],1)],1),a("div",{staticClass:"col-4 row"},[a("TCFormGroup",{staticClass:"col-3",attrs:{label:"職位名稱",required:""}}),a("TCFormGroup",{staticClass:"col-9",attrs:{required:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.records.name,expression:"records.name"}],staticClass:"form-control",domProps:{value:e.records.name},on:{input:function(t){t.target.composing||e.$set(e.records,"name",t.target.value)}}})])],1),a("div",{staticClass:"col-4 row"},[a("TCFormGroup",{staticClass:"col-3",attrs:{label:"職位編號",required:""}}),a("TCFormGroup",{staticClass:"col-9",attrs:{required:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.records.position_no,expression:"records.position_no"}],staticClass:"form-control",domProps:{value:e.records.position_no},on:{input:function(t){t.target.composing||e.$set(e.records,"position_no",t.target.value)}}})])],1),a("div",{staticClass:"col-4 row"},[a("TCFormGroup",{staticClass:"col-3",attrs:{label:"層級",required:""}}),a("TCFormGroup",{staticClass:"col-9",attrs:{required:""}},[a("TCDropdown",{attrs:{options:e.grade_options,"allow-empty":!1,required:""},model:{value:e.records.level,callback:function(t){e.$set(e.records,"level",t)},expression:"records.level"}})],1)],1)]),a("div",{staticClass:"row align-items-center mt-5"},[a("div",{staticClass:"col-2",class:{topSelectTrue:!e.isClickChangeFn,topSelectFalse:e.isClickChangeFn},on:{click:function(t){return e.changePage(!1)}}},[a("span",{staticStyle:{"font-weight":"bold","line-height":"50px"}},[e._v("功能權限設置")])]),a("div",{staticClass:"col-2",class:{topSelectTrue:e.isClickChangeFn,topSelectFalse:!e.isClickChangeFn},on:{click:function(t){return e.changePage(!0)}}},[a("span",{staticStyle:{"font-weight":"bold","line-height":"50px"}},[e._v("數據權限設置")])]),a("div",{staticClass:"col-12",staticStyle:{border:"0.5px solide black"}},[a("div",{staticStyle:{height:"50px","overflow-y":"auto","background-color":"#ecf5ff",padding:"0 16px","border-left":"0.5px solid #dddddd","border-right":"0.5px solid #dddddd",display:"flex"}},[e.isClickChangeFn?e._e():a("span",{staticStyle:{"font-size":"14px","font-weight":"bold","line-height":"50px","margin-right":"auto"}},[e._v("模組功能權限設置")])]),e.isClickChangeFn&&"selec_acc"==e.picked?a("div",{staticStyle:{height:"44px","overflow-y":"auto","background-color":"#f7f7f7",padding:"0 16px","border-left":"0.5px solid #dddddd","border-right":"0.5px solid #dddddd",display:"flex"}},[a("span",{staticStyle:{"margin-right":"auto"}}),a("div",[a("button",{staticClass:"btn btn-primary px-5",attrs:{onclick:"select_acc.add_acc()"}},[e._v(" 可跟進戶口 ")]),a("button",{staticClass:"btn btn-primary ml-2 px-5",attrs:{onclick:"select_acc.remove_acc()"}},[e._v(" 除外戶口 ")])])]):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isClickChangeFn,expression:"!isClickChangeFn"}],staticStyle:{height:"400px","overflow-y":"auto","background-color":"white",padding:"3px 16px","border-left":"0.5px solid #dddddd","border-right":"0.5px solid #dddddd","border-bottom":"0.5px solid #dddddd"},attrs:{id:"permissionTreeDiv"}},[a("el-tree",{ref:"tree",attrs:{data:e.treeData,"show-checkbox":"","node-key":"id",props:e.defaultProps,"default-checked-keys":e.checkPermission},on:{check:e.checkTreeCheckbox}})],1)])])]},proxy:!0},{key:"footer",fn:function(){return[a("button",{staticClass:"btn btn-new4",attrs:{type:"button"},on:{click:function(t){return e.submit()}}},[e._v(" 保存 ")]),a("button",{staticClass:"btn btn-new4",attrs:{type:"button"},on:{click:function(t){return e.hide(0)}}},[e._v(" 離開 ")])]},proxy:!0}])})],1)},p=[],h=(a("b0c0"),a("5fec")),f=a("8475"),m=a("38f5"),b=(a("1276"),a("9801")),_=a("85be"),v=function(){var e=[],t=[],a=[],n=[],r=[],s=[],l=[],o=[];for(var c in _["a"].permissions)switch(e.push(c),c.split("_").length){case 1:0!=c&&t.push(c);break;case 2:a.push(c);break;case 3:n.push(c);break;case 4:r.push(c);break;case 5:s.push(c);break;case 6:l.push(c);break;case 7:o.push(c);break;default:break}e=[].concat(t,a,n,r,s,l,o);var d=[{id:"0",label:b["a"].tc("permissions.0"),children:[]}];return e.forEach(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.split("_"),e.t0=n.length,e.next=1===e.t0?4:2===e.t0?6:3===e.t0?8:4===e.t0?10:5===e.t0?12:6===e.t0?14:7===e.t0?16:18;break;case 4:return d[0].children.push({id:"".concat(t),label:b["a"].tc("permissions.".concat(t)),children:[]}),e.abrupt("break",19);case 6:return d[0].children[parseInt(n[0])-1].children.push({id:"".concat(t),label:b["a"].tc("permissions.".concat(t)),children:[]}),e.abrupt("break",19);case 8:return d[0].children[parseInt(n[0])-1].children[parseInt(n[1])-1].children.push({id:"".concat(t),label:b["a"].tc("permissions.".concat(t)),children:[]}),e.abrupt("break",19);case 10:return d[0].children[parseInt(n[0])-1].children[parseInt(n[1])-1].children[parseInt(n[2])-1].children.push({id:"".concat(t),label:b["a"].tc("permissions.".concat(t)),children:[]}),e.abrupt("break",19);case 12:return d[0].children[parseInt(n[0])-1].children[parseInt(n[1])-1].children[parseInt(n[2])-1].children[parseInt(n[3])-1].children.push({id:"".concat(t),label:b["a"].tc("permissions.".concat(t)),children:[]}),e.abrupt("break",19);case 14:return d[0].children[parseInt(n[0])-1].children[parseInt(n[1])-1].children[parseInt(n[2])-1].children[parseInt(n[3])-1].children[parseInt(n[4])-1].children.push({id:"".concat(t),label:b["a"].tc("permissions.".concat(t)),children:[]}),e.abrupt("break",19);case 16:return d[0].children[parseInt(n[0])-1].children[parseInt(n[1])-1].children[parseInt(n[2])-1].children[parseInt(n[3])-1].children[parseInt(n[4])-1].children[parseInt(n[5])-1].children.push({id:"".concat(t),label:b["a"].tc("permissions.".concat(t)),children:[]}),e.abrupt("break",19);case 18:return e.abrupt("break",19);case 19:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),d},g=v,y={createPosition:"".concat("http://dev-tc-laravel.vc-technology.com","/api/system-management/position/create"),updatePosition:"".concat("http://dev-tc-laravel.vc-technology.com","/api/system-management/position/update"),getCheckedPermissions:"".concat("http://dev-tc-laravel.vc-technology.com","/api/system-management/position/detail")},C={name:"edit_form",components:{TCModal:h["a"],TCFormGroup:m["a"],TCDropdown:f["a"]},created:function(){this.treeData=g()},data:function(){return{defaultProps:{children:"children",label:"label"},UI:{title:null,title_create:"新增職位",title_update:"修改職位"},is_create:!1,records:{user_department_id:"",name:null,position_no:null,level:0,permission:null},grade_options:[{value:0,text:""},{value:1,text:"賬房"},{value:2,text:"主任"},{value:3,text:"經理"},{value:4,text:"總經理"}],treeData:[],department_options:[],checkPermission:[],originPositionTotalPermission:[],isEverCheckPermission:!1,user_position_id:"",filterString:"",permissionsSearchStr:"",accSearchStr:"",importAcc:{accNo:[],accGroup:[]},canceledAcc:{accNo:[],accGroup:[]},layer:"",picked:"selec_acc",isClickChangeFn:!1,isSearchingPermission:!1}},methods:{changePage:function(e){this.isClickChangeFn=e},checkTreeCheckbox:function(e,t){this.records.permission=[].concat(Object(l["a"])(t.checkedKeys),Object(l["a"])(t.halfCheckedKeys)),this.isEverCheckPermission=!0},hide:function(){return this.$refs.modal.hide()},submit:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.records,e.next=3,this.validate(t);case 3:if(!e.sent){e.next=5;break}this.save();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),validate:function(e){var t=[];if(e.user_department_id||t.push("部門 "),e.name||t.push("職位名稱 "),e.position_no||t.push("職位編號 "),t.length>0){var a="";return t.forEach((function(e){a+=e})),a+="不得為空",this.$message({top:1e3,showClose:!0,duration:5e3,message:a,type:"error"}),!1}return!0},save:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,SysUI.input_pin(!0);case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return this.is_create?(t=y.createPosition,a="POST"):(t=y.updatePosition,a="PUT",this.records.user_position_id=this.user_position_id),e.next=7,SysUI.axios(a,t,this.records).then(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(200!=t.httpStatus){e.next=7;break}return n.$message({top:1e3,showClose:!0,duration:5e3,message:t.message,type:"success"}),n.hide(),e.next=5,n.$parent.search();case 5:e.next=8;break;case 7:n.$message({top:1e3,showClose:!0,duration:5e3,message:t.message,type:"error"});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),record_init:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.isEverCheckPermission=!1,this.records={user_department_id:"",name:null,position_no:null,level:0,permission:null},this.originPositionTotalPermission=[],this.user_position_id="",this.checkPermission=[],this.treeData=g();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),refresh_record:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.user_position_id=t,e.next=3,SysUI.axios("GET",y.getCheckedPermissions,{user_position_id:t}).then(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(200!=t.httpStatus){e.next=7;break}return a.records=t.data,e.next=4,a.treeData[0].children.forEach((function(e){a.checkTreeForeach(e,t.data.permission)}));case 4:a.originPositionTotalPermission=e.sent,e.next=8;break;case 7:a.$message({top:1e3,showClose:!0,duration:5e3,message:"獲取權限失敗",type:"error"});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),checkTreeForeach:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,a){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.children.length>0?t.children.forEach((function(e){n.checkTreeForeach(e,a)})):a.includes(t.id)&&(this.checkPermission=[].concat(Object(l["a"])(this.checkPermission),[t.id]));case 1:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}(),edit_record:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.record_init();case 2:return this.is_create=!1,this.UI.title=this.UI.title_update,e.next=6,this.refresh_record(t);case 6:return e.abrupt("return",this.show());case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),create_record:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.record_init();case 2:return this.is_create=!0,this.UI.title=this.UI.title_create,e.abrupt("return",this.show());case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getDepartmentOption:function(e){this.department_options=e,this.department_options=[{value:"",text:""}].concat(Object(l["a"])(this.department_options))},show:function(){return this.$refs.modal.show()}}},k=C,x=(a("3a9e"),a("2877")),w=Object(x["a"])(k,u,p,!1,null,null,null),S=w.exports,F=function(){return[{label:"部門",key:"department",scale:1},{label:"職位名稱",key:"name",scale:1},{label:"職位編號",key:"position_no",scale:1},{label:"賬房",key:"accountant",scale:1},{label:"主任",key:"account_manager",scale:1},{label:"經理",key:"manager",scale:1},{label:"總經理",key:"general_manager",scale:1}]},P=F,O={getDepartmentList:"".concat("http://dev-tc-laravel.vc-technology.com","/api/system-management/department/list"),getPositionList:"".concat("http://dev-tc-laravel.vc-technology.com","/api/system-management/position/list")},I={name:"assistant",components:{FilterInputField:o["a"],FilterDateFiled:c["a"],FilterSelectField:d["a"],EditForm:S},data:function(){return{selected_index:[],fields:[],list:[],filters:{name:"",position_no:"",user_department_id:"",page:1,limit:20},Position:[],hidden_fields:[],operation_width:"100px",Department:[],permissions:[]}},created:function(){this.getColumns(),this.getDepartment(),this.permissions=getModulePermissions(),console.log("this.permissions",this.permissions)},computed:{get_operation_col_style:function(){return{width:this.operation_width}},filter_fields:function(){var e=this,t=this.fields,a=[];return t.forEach((function(t){e.hidden_fields.includes(t.key)||(a=[].concat(Object(l["a"])(a),[t]))})),a}},methods:{pageSearch:function(e){this.filters=Object(s["a"])(Object(s["a"])({},this.filters),e),this.search()},getColumns:function(){this.fields=P()},getDepartment:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,SysUI.axios("GET",O.getDepartmentList,e.filters).then(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(a){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.data.data;case 2:n=t.sent,n.forEach((function(e){e.value=e.department_id})),e.Department=[{value:"",name:""}].concat(Object(l["a"])(n)),e.$refs.editForm.getDepartmentOption(n);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})))()},getHiddenFields:function(e){this.hidden_fields=e},search:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,SysUI.input_pin(!0);case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,SysUI.axios("GET",O.getPositionList,this.filters).then(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$refs.page.setDataFromAPI(a.data.pagination),e.next=3,a.data.data;case 3:t.list=e.sent,t.selected_index=[];case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),sync_thead_scroll:function(){$(this.$refs.thead).scrollLeft($(this.$refs.tbody).scrollLeft())},select_display_fields:function(){this.$refs.displayColumn.show()},handle_acitve_tr:function(e){-1==this.selected_index.indexOf(e)?this.selected_index.push(e):this.selected_index.splice(this.selected_index.indexOf(e),1)},createDepartment:function(){this.$refs.editForm.create_record()},editDepartment:function(e){this.$refs.editForm.edit_record(e)}}},T=I,j=Object(x["a"])(T,n,r,!1,null,null,null);t["default"]=j.exports},8475:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("select",{staticClass:"form-select",attrs:{disabled:e.disabled},on:{change:function(t){e.change(t),e.validate}}},[e.allowEmpty?a("option",{domProps:{value:e.emptyValue}},[e._v(e._s(e.emptyText))]):e._e(),e._t("default",(function(){return e._l(e.options,(function(t,n){return a("option",{key:n,attrs:{disabled:t.disabled},domProps:{value:t.value,selected:t.value===e.value}},[e._v(" "+e._s(t.text||t.name)+" ")])}))}))],2)},r=[],i=(a("a9e3"),{name:"TCDropdown",model:{prop:"value",event:"change"},props:{value:null,options:{type:Array,default:function(){return[{text:"請傳入資料 須包含text或name 以及value",value:"",disabled:!1}]}},allowEmpty:{type:Boolean,default:!0},emptyText:{type:String,default:""},emptyValue:{type:[String,Number,Object,Boolean,null],default:null},validate:Function,disabled:Boolean},methods:{change:function(e){this.$emit("change",e.target.value)}}}),s=i,l=a("2877"),o=Object(l["a"])(s,n,r,!1,null,null,null);t["a"]=o.exports},"97c0":function(e,t,a){"use strict";a("e31f")},e31f:function(e,t,a){}}]);
//# sourceMappingURL=chunk-486ebff2.b32481fa.js.map
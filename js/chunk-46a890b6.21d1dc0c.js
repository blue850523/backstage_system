(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46a890b6"],{"182a":function(t,e,a){"use strict";a("fdd2")},"550c":function(t,e,a){},"765a":function(t,e,a){},aa5b:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"accmanage"},[a("div",{staticClass:"vc-panel",attrs:{id:"main-panel"}},[a("div",{staticClass:"vc-panel-heading"},[a("span",{staticClass:"vc-panel-title"},[t._v("提醒管理")]),a("div",{staticClass:"pull-right"},[t.permissions["1_4_1_1"]?a("button",{staticClass:"btn btn-new",on:{click:function(e){return t.create_order_note()}}},[t._v(" 新增提醒 ")]):t._e()])]),a("div",{staticClass:"vc-panel-body"},[t.permissions["1_4_2"]?a("form",{staticClass:"vc-panel-body-search watermark-container",attrs:{id:"search-panel"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search()}}},[a("WaterMark"),a("div",{staticClass:"subTitle justify-content-between"},[t._v(" 選擇搜尋條件 ")]),a("div",{staticClass:"vc-panel-body-search-row row row-cols-4 gx-0 gy-1"},[t.permissions["1_4_2_1_1"]?a("FilterOrderNameField",{attrs:{label:"項目名稱",id:"filter_type_ids",name:"filter_type_ids"},on:{emitOpenOrderNameForm:function(e){return t.getOpenOrderNameForm("項目名稱","type_ids")}},model:{value:t.filters.type_ids,callback:function(e){t.$set(t.filters,"type_ids",e)},expression:"filters.type_ids"}}):t._e(),a("FilterInputField",{attrs:{label:"戶口編號",id:"filter_account_no",name:"filter_account_no",maxlength:"10",only_number:""},model:{value:t.filters.account_no,callback:function(e){t.$set(t.filters,"account_no",e)},expression:"filters.account_no"}}),t.permissions["1_4_2_1_2"]?a("FilterAccountGroupField",{attrs:{label:"戶組",id:"filter_account_group",name:"filter_account_group"},on:{emitOpenAccountGroupForm:function(e){return t.getOpenAccountGroupForm("戶組","account_group")}},model:{value:t.filters.account_group,callback:function(e){t.$set(t.filters,"account_group",e)},expression:"filters.account_group"}}):t._e(),a("FilterSelectField",{attrs:{label:"戶口狀態",name:"filter_status",id:"filter_status",options:[{value:"",option:""},{value:0,option:"未完成"},{value:1,option:"已完成"}]},model:{value:t.filters.status,callback:function(e){t.$set(t.filters,"status",e)},expression:"filters.status"}}),a("FilterDateFiled",{attrs:{label:"開始時間",id:"filter_start_date",name:"filter_start_date"},model:{value:t.filters.start_date,callback:function(e){t.$set(t.filters,"start_date",e)},expression:"filters.start_date"}}),a("FilterDateFiled",{attrs:{label:"完成時間",id:"filter_complete_date",name:"filter_complete_date"},model:{value:t.filters.complete_date,callback:function(e){t.$set(t.filters,"complete_date",e)},expression:"filters.complete_date"}}),a("FilterInputField",{attrs:{label:"關鍵字",id:"filter_keyword",name:"filter_keyword"},model:{value:t.filters.keyword,callback:function(e){t.$set(t.filters,"keyword",e)},expression:"filters.keyword"}}),t.permissions["1_4_2_1_3"]?a("FilterDepartmentField",{attrs:{label:"可查閱部門",id:"filter_permission_department_ids",name:"filter_permission_department_ids"},on:{emitOpenDepartmentForm:function(e){return t.getOpenDepartmentForm("可查閱部門","permission_department_ids")}},model:{value:t.filters.permission_department_ids,callback:function(e){t.$set(t.filters,"permission_department_ids",e)},expression:"filters.permission_department_ids"}}):t._e(),t.permissions["1_4_2_1_4"]?a("FilterLocationField",{attrs:{label:"顯示廳",id:"filter_show_location_ids",name:"filter_show_location_ids"},on:{emitOpenLocationForm:function(e){return t.getOpenLocationForm("顯示廳","show_location_ids")}},model:{value:t.filters.show_location_ids,callback:function(e){t.$set(t.filters,"show_location_ids",e)},expression:"filters.show_location_ids"}}):t._e(),a("FilterInputField",{attrs:{label:"經手人",id:"filter_staff_name",name:"filter_staff_name"},model:{value:t.filters.staff_name,callback:function(e){t.$set(t.filters,"staff_name",e)},expression:"filters.staff_name"}})],1),a("div",{staticClass:"vc-panel-body-search-row row g-0"},[a("div",{staticClass:"col text-end"},[t.permissions["1_4_2_1_5"]?a("button",{staticClass:"btn btn-p btn-mr4",attrs:{type:"button"},on:{click:function(e){return t.search()}}},[t._v(" 搜尋 ")]):t._e(),t.permissions["1_4_2_1_6"]?a("button",{staticClass:"btn btn-p",attrs:{type:"reset"},on:{click:function(e){return t.reset()}}},[t._v(" 重置 ")]):t._e()])])],1):t._e(),t.permissions["1_4_3"]?a("div",{staticClass:"vc-panel-body-list",attrs:{id:"list-panel"}},[a("div",{staticClass:"subTitle justify-content-between"},[t._v(" 檢視搜尋結果 "),a("div",{staticClass:"text-end"},[t.permissions["1_4_3_1_1"]?a("button",{staticClass:"btn btn-new5 btn-mr4",on:{click:t.select_display_fields}},[t._v(" 篩選顯示 ")]):t._e(),t.permissions["1_4_3_1_2"]?a("button",{staticClass:"btn btn-new2 btn-mr4"},[t._v(" 列印 ")]):t._e(),t.permissions["1_4_3_1_3"]?a("button",{staticClass:"btn btn-new3 btn-mr4"},[t._v(" 匯出EXCEL ")]):t._e()])]),a("div",{staticClass:"vc-panel-body-list-table"},[a("div",{staticClass:"table-container watermark-container"},[a("WaterMark"),a("div",{ref:"thead",staticClass:"table-responsive nopadding thead"},[a("table",{staticClass:"table table-bordered"},[a("thead",[a("tr",{staticClass:"table-title-bar"},[t.permissions["1_4_3_2_1"]?a("th",{staticClass:"text-center",style:t.operation_col_width()},[t._v(" 操作 ")]):t._e(),t._l(t.filter_fields,(function(e){return a("th",{key:e.key,staticClass:"text-center",class:"field-scale-"+e.scale},[t._v(" "+t._s(e.label)+" ")])}))],2)])])]),a("div",{ref:"tbody",staticClass:"table-responsive nopadding tbody",on:{scroll:function(e){return t.sync_thead_scroll()}}},[a("table",{staticClass:"table table-bordered table-hover"},[a("tbody",[a("tr",[t.permissions["1_4_3_2_1"]?a("td",{staticClass:"text-center",style:t.operation_col_width()},[t.permissions["1_4_3_1_4"]?a("button",{staticClass:"btn btn-p btn-mr4",on:{click:function(e){return t.detail_order_note()}}},[t._v("詳細")]):t._e(),t.permissions["1_4_3_1_5"]?a("button",{staticClass:"btn btn-w btn-mr4",on:{click:function(e){return t.edit_order_note()}}},[t._v("修改")]):t._e()]):t._e(),t._l(t.filter_fields,(function(e){return a("td",{key:e.key,staticClass:"text-left",class:"field-scale-"+e.scale},[t._v(" "+t._s(e.label)+" ")])}))],2),t._l(t.list,(function(e,n){return a("tr",{key:n,class:{selectedTr:t.selected_index.includes(n)},on:{click:function(e){return t.handle_acitve_tr(n)}}},[t.permissions["1_4_3_2_1"]?a("td",{staticClass:"text-center",style:t.operation_col_width()},[t.permissions["1_4_3_1_4"]?a("button",{staticClass:"btn btn-p btn-mr4",on:{click:function(a){return t.detail_order_note(e)}}},[t._v("詳細")]):t._e(),t.permissions["1_4_3_1_5"]?a("button",{staticClass:"btn btn-w btn-mr4",on:{click:function(a){return t.edit_order_note(e)}}},[t._v("修改")]):t._e()]):t._e(),t._l(t.filter_fields,(function(n){return a("td",{key:n.key,staticClass:"text-left",class:"field-scale-"+n.scale},[t._v(" "+t._s(e[n.key])+" ")])}))],2)}))],2)])])],1)])]):t._e()]),t.permissions["1_4"]&&t.permissions["1_4_2_1_5"]?a("Pagination",{ref:"page",on:{searchService:t.pageSearch}}):t._e()],1),a("PageRemark",{attrs:{html:t.footer_total}}),a("DisplayColumn",{ref:"displayColumn",attrs:{fields:t.fields},on:{hidden_fields:t.getHiddenFields}}),a("OrderNameForm",{ref:"order_name_form"}),a("AccountGroupForm",{ref:"account_group_form"}),a("DepartmentForm",{ref:"department_form",attrs:{department_list:t.department_list}}),a("LocationForm",{ref:"location_form",attrs:{location_list:t.location_list}}),a("EditForm",{ref:"edit_form"})],1)},r=[],c=a("1da1"),o=a("5530"),i=a("2909"),s=(a("96cf"),a("d3b7"),a("159b"),a("caad"),a("2532"),a("99af"),a("ac1f"),a("841c"),a("e9c4"),a("a434"),a("4de4"),a("3ea2")),l=a("4264"),d=a("14cc"),_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.size},[a("div",{staticClass:"form-group row nopadding"},[a("div",{staticClass:"nopadding",class:t.label_size},[a("div",{staticClass:"filter-title"},[a("a",{staticClass:"control-label",attrs:{href:"#"},on:{click:function(e){return t.open_order_name_form()}}},[t._v(" "+t._s(t.label)+" ")])])]),a("div",{staticClass:"nopadding",class:t.input_size},[a("input",{staticClass:"form-control",attrs:{placeholder:t.label,disabled:""},domProps:{value:t.select_order_name_label}}),a("input",{staticClass:"form-control",attrs:{type:"hidden",id:t.id,name:t.name},domProps:{value:t.value},on:{input:function(e){return t.input(e)}}})])])])},u=[],p={name:"filter_order_name_field",data:function(){return{}},props:{label:{type:String,default:"項目名稱"},name:{type:String,default:"請傳入name"},id:{type:String,default:""},size:{type:String,default:"col-3"},label_size:{type:String,default:"col-5"},input_size:{type:String,default:"col-5"},value:{type:Array,default:[]}},computed:{select_order_name_label:function(){var t="";return this.value.length>0&&(t="已選擇".concat(this.value.length,"個")),t}},methods:{input:function(t){this.$emit("input",t.target.value)},open_order_name_form:function(){this.$emit("emitOpenOrderNameForm",this.value)}}},m=p,f=a("2877"),v=Object(f["a"])(m,_,u,!1,null,null,null),h=v.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.size},[a("div",{staticClass:"form-group row nopadding"},[a("div",{staticClass:"nopadding",class:t.label_size},[a("div",{staticClass:"filter-title"},[a("a",{staticClass:"control-label",attrs:{href:"#"},on:{click:function(e){return t.open_department_form()}}},[t._v(" "+t._s(t.label)+" ")])])]),a("div",{staticClass:"nopadding",class:t.input_size},[a("input",{staticClass:"form-control",attrs:{placeholder:t.label,disabled:""},domProps:{value:t.select_department_label}}),a("input",{staticClass:"form-control",attrs:{type:"hidden",id:t.id,name:t.name},domProps:{value:t.value},on:{input:function(e){return t.input(e)}}})])])])},b=[],x={name:"filter_department_field",data:function(){return{}},props:{label:{type:String,default:"可查閱部門"},name:{type:String,default:"請傳入name"},id:{type:String,default:""},size:{type:String,default:"col-3"},label_size:{type:String,default:"col-5"},input_size:{type:String,default:"col-5"},value:{type:Array,default:[]}},computed:{select_department_label:function(){var t="";return this.value.length>0&&(t="已選擇".concat(this.value.length,"個")),t}},methods:{input:function(t){this.$emit("input",t.target.value)},open_department_form:function(){this.$emit("emitOpenDepartmentForm",this.value)}}},y=x,k=Object(f["a"])(y,g,b,!1,null,null,null),w=k.exports,C=a("16b7"),O=a("1746"),F=a("6df2"),N=a("5499"),R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("TCModal",{ref:"modal",staticClass:"order_name_form",attrs:{id:"order_name_form",title:t.title,dialog_width:"1200px","modal-body-style":{"min-height":"fit-content","max-height":"auto",overflow:"auto"}},scopedSlots:t._u([{key:"body",fn:function(){return[a("div",{staticClass:"order_name_container watermark-container"},[a("WaterMarker"),a("div",{staticClass:"row g-0 order_name_list"},[a("div",{staticClass:"form-group col-2"},[a("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"all_order_name_checkbox"},on:{click:function(e){return t.all_order_name_click(e)}}}),a("label",{staticClass:"control-label",attrs:{for:"all_order_name_checkbox"}},[t._v("全選")])]),a("div",{staticClass:"form-group col-10 row g-0 align-items-start"},t._l(t.order_name_list,(function(e,n){return a("div",{key:"order_name_item_"+n,staticClass:"form-group col-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.select_order_name_id,expression:"select_order_name_id"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"order_name_checkbox_"+n},domProps:{value:e.order_name_id,checked:Array.isArray(t.select_order_name_id)?t._i(t.select_order_name_id,e.order_name_id)>-1:t.select_order_name_id},on:{change:function(a){var n=t.select_order_name_id,r=a.target,c=!!r.checked;if(Array.isArray(n)){var o=e.order_name_id,i=t._i(n,o);r.checked?i<0&&(t.select_order_name_id=n.concat([o])):i>-1&&(t.select_order_name_id=n.slice(0,i).concat(n.slice(i+1)))}else t.select_order_name_id=c}}}),a("label",{staticClass:"control-label",attrs:{for:"order_name_checkbox_"+n}},[t._v(t._s(e.name))])])})),0)])],1)]},proxy:!0},{key:"footer",fn:function(){return[a("button",{staticClass:"btn btn-new4",attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v("確定")]),a("button",{staticClass:"btn btn-new4",attrs:{type:"button"},on:{click:function(e){return t.hide()}}},[t._v("離開")])]},proxy:!0}])})},S=[],A=(a("d81d"),a("4e82"),a("5fec")),j=a("a847"),I={name:"order_name_form",components:{TCModal:A["a"],WaterMarker:j["a"]},data:function(){return{title:"項目名稱",select_order_name_id:[],order_name_list:[{name:"貸款",order_name_id:1},{name:"利息",order_name_id:2},{name:"佣金",order_name_id:3},{name:"存卡",order_name_id:4},{name:"開工留意",order_name_id:5},{name:"場面",order_name_id:6},{name:"注意",order_name_id:7},{name:"補充文件",order_name_id:8},{name:"集團備註",order_name_id:9}]}},methods:{edit_record:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;return this.reset(),this.title=""!=t?t:"項目名稱",this.select_order_name_id=JSON.parse(JSON.stringify(e)),this.show()},all_order_name_click:function(t){var e=this,a=t.target.checked+0,n=this.order_name_list.map((function(t){return t.order_name_id}));1===a?n.forEach((function(t){-1===e.select_order_name_id.indexOf(t)&&e.select_order_name_id.push(t)})):n.forEach((function(t){-1!==e.select_order_name_id.indexOf(t)&&e.select_order_name_id.splice(e.select_order_name_id.indexOf(t),1)}))},save:function(){this.select_order_name_id.sort(),this.hide(1)},show:function(){return this.$refs.modal.show()},hide:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t?this.$refs.modal.hide(this.select_order_name_id):this.$refs.modal.hide()},reset:function(){$("#all_order_name_checkbox").prop("checked",!1)}}},P=I,D=(a("ca3a"),Object(f["a"])(P,R,S,!1,null,null,null)),U=D.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("TCModal",{ref:"modal",staticClass:"department_form",attrs:{id:"department_form",title:t.title,dialog_width:"1200px","modal-body-style":{"min-height":"fit-content","max-height":"auto",overflow:"auto"}},scopedSlots:t._u([{key:"body",fn:function(){return[a("div",{staticClass:"department_container watermark-container"},[a("WaterMarker"),a("div",{staticClass:"row g-0 department_list"},[a("div",{staticClass:"form-group col-2"},[a("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"all_department_checkbox"},on:{click:function(e){return t.all_department_click(e)}}}),a("label",{staticClass:"control-label",attrs:{for:"all_department_checkbox"}},[t._v("全部門")])]),a("div",{staticClass:"form-group col-10 row g-0 align-items-start"},t._l(t.department_list,(function(e,n){return a("div",{key:"department_item_"+n,staticClass:"form-group col-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.select_department_id,expression:"select_department_id"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"department_checkbox_"+n},domProps:{value:e.department_id,checked:Array.isArray(t.select_department_id)?t._i(t.select_department_id,e.department_id)>-1:t.select_department_id},on:{change:function(a){var n=t.select_department_id,r=a.target,c=!!r.checked;if(Array.isArray(n)){var o=e.department_id,i=t._i(n,o);r.checked?i<0&&(t.select_department_id=n.concat([o])):i>-1&&(t.select_department_id=n.slice(0,i).concat(n.slice(i+1)))}else t.select_department_id=c}}}),a("label",{staticClass:"control-label",attrs:{for:"department_checkbox_"+n}},[t._v(t._s(e.name))])])})),0)])],1)]},proxy:!0},{key:"footer",fn:function(){return[a("button",{staticClass:"btn btn-new4",attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v("確定")]),a("button",{staticClass:"btn btn-new4",attrs:{type:"button"},on:{click:function(e){return t.hide()}}},[t._v("離開")])]},proxy:!0}])})},L=[],M={name:"department_form",components:{TCModal:A["a"],WaterMarker:j["a"]},data:function(){return{title:"可查閱部門",select_department_id:[]}},props:{department_list:{type:Array,default:[]}},methods:{edit_record:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;return this.reset(),this.title=""!=t?t:"可查閱部門",this.select_department_id=JSON.parse(JSON.stringify(e)),this.show()},all_department_click:function(t){var e=this,a=t.target.checked+0,n=this.department_list.map((function(t){return t.department_id}));1===a?n.forEach((function(t){-1===e.select_department_id.indexOf(t)&&e.select_department_id.push(t)})):n.forEach((function(t){-1!==e.select_department_id.indexOf(t)&&e.select_department_id.splice(e.select_department_id.indexOf(t),1)}))},save:function(){this.select_department_id.sort(),this.hide(1)},show:function(){return this.$refs.modal.show()},hide:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t?this.$refs.modal.hide(this.select_department_id):this.$refs.modal.hide()},reset:function(){$("#all_department_checkbox").prop("checked",!1)}}},Y=M,z=(a("182a"),Object(f["a"])(Y,E,L,!1,null,null,null)),q=z.exports,H=a("abec"),T=function(){return[{label:"戶口編號",key:"account_no",scale:1},{label:"姓名",key:"name",scale:1},{label:"項目",key:"type",scale:2},{label:"內容",key:"content",scale:2},{label:"開始日期",key:"start_time",scale:2},{label:"完成日期",key:"complete_time",scale:2},{label:"狀態",key:"status",scale:1},{label:"部門",key:"permission_departments",scale:1},{label:"職位",key:"staff_position",scale:1},{label:"所屬廳",key:"show_locations",scale:2},{label:"操作廳",key:"location",scale:1},{label:"最後修改時間",key:"updated_at",scale:2},{label:"經手人",key:"staff_name",scale:1}]},J=T,G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("TCModal",{ref:"modal",staticClass:"edit_form",attrs:{id:"edit_form",title:t.UI.title,dialog_width:"1600px","modal-body-style":{"min-height":"fit-content",overflow:"auto"}},scopedSlots:t._u([{key:"body",fn:function(){return[a("div",{staticClass:"row g-0 type-area"},[a("div",{staticClass:"col-1"},[a("div",{staticClass:"form-group row nopadding required",class:{"text-d":t.error.type}},[a("label",{staticClass:"control-label text-end"},[t._v("項目名稱")])])]),a("div",{staticClass:"col-11"},[a("div",{staticClass:"row check-box-area"},t._l(t.type_list,(function(e,n){return a("div",{key:"type_item_"+n,staticClass:"form-group col-1"},[9==e.value?[t.check_permission("group_remark")?[a("input",{directives:[{name:"model",rawName:"v-model",value:t.type_ids,expression:"type_ids"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"type_checkbox_"+n,disabled:t.is_detail},domProps:{value:e.value,checked:Array.isArray(t.type_ids)?t._i(t.type_ids,e.value)>-1:t.type_ids},on:{change:function(a){var n=t.type_ids,r=a.target,c=!!r.checked;if(Array.isArray(n)){var o=e.value,i=t._i(n,o);r.checked?i<0&&(t.type_ids=n.concat([o])):i>-1&&(t.type_ids=n.slice(0,i).concat(n.slice(i+1)))}else t.type_ids=c}}}),a("label",{staticClass:"control-label",attrs:{for:"type_checkbox_"+n}},[t._v(t._s(e.name))])]:t._e()]:[a("input",{directives:[{name:"model",rawName:"v-model",value:t.type_ids,expression:"type_ids"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"type_checkbox_"+n,disabled:t.is_detail},domProps:{value:e.value,checked:Array.isArray(t.type_ids)?t._i(t.type_ids,e.value)>-1:t.type_ids},on:{change:function(a){var n=t.type_ids,r=a.target,c=!!r.checked;if(Array.isArray(n)){var o=e.value,i=t._i(n,o);r.checked?i<0&&(t.type_ids=n.concat([o])):i>-1&&(t.type_ids=n.slice(0,i).concat(n.slice(i+1)))}else t.type_ids=c}}}),a("label",{staticClass:"control-label",attrs:{for:"type_checkbox_"+n}},[t._v(t._s(e.name))])]],2)})),0)])]),a("div",{staticClass:"row g-0 account-area"},[a("div",{staticClass:"col-4 row nopadding form-group required"},[a("div",{staticClass:"col-3 row nopadding"},[a("label",{staticClass:"control-label text-end account-type-label",class:{"text-d":t.error.account}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.create_type,expression:"create_type"}],staticClass:"form-check-input",attrs:{type:"radio",value:"1",disabled:t.is_detail},domProps:{checked:t._q(t.create_type,"1")},on:{change:[function(e){t.create_type="1"},function(e){return t.change_create_type("1")}]}}),t._v(" 戶口編號 ")])]),a("div",{staticClass:"col-9 row nopadding account-group"},[a("div",{staticClass:"col-10 nopadding account-input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.account_no,expression:"account_no"},{name:"tc-number",rawName:"v-tc-number"}],staticClass:"form-control",attrs:{placeholder:"戶口編號",disabled:t.is_detail||"1"!=t.create_type},domProps:{value:t.account_no},on:{blur:function(e){return t.get_account_info("account")},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.add_account("account")},input:[function(e){e.target.composing||(t.account_no=e.target.value)},function(e){t.account_name="",t.account_id=""}]}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.account_name,expression:"account_name"}],staticClass:"form-control",attrs:{placeholder:"戶主名稱",disabled:""},domProps:{value:t.account_name},on:{input:function(e){e.target.composing||(t.account_name=e.target.value)}}})]),a("div",{staticClass:"col-2 nopadding account-btn"},[t.is_detail?t._e():a("button",{staticClass:"btn btn-p btn-ml4",attrs:{disabled:"1"!=t.create_type},on:{click:function(e){return t.add_account("account")}}},[t._v(" 加入 ")])]),a("div",{staticClass:"col-12 account-list"},t._l(t.accounts,(function(e,n){return a("div",{key:"account_list_"+e.account_no,staticClass:"account-list-item"},[a("span",{staticClass:"acc-list-delete-btn",on:{click:function(e){return t.delete_account("account",n)}}},[a("i",{staticClass:"fa fa-minus-circle"})]),a("label",[t._v(" "+t._s(e.account_no+" "+e.account_name)+" ")])])})),0)])])]),a("div",{staticClass:"row g-0 account-area"},[a("div",{staticClass:"col-4 row nopadding form-group required"},[a("div",{staticClass:"col-3 row nopadding"},[a("label",{staticClass:"control-label text-end account-type-label",class:{"text-d":t.error.account_group_account}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.create_type,expression:"create_type"}],staticClass:"form-check-input",attrs:{type:"radio",value:"2",disabled:t.is_detail},domProps:{checked:t._q(t.create_type,"2")},on:{change:[function(e){t.create_type="2"},function(e){return t.change_create_type("2")}]}}),t._v(" 戶組 ")])]),a("div",{staticClass:"col-9 row nopadding account-group"},[a("div",{staticClass:"col-10 nopadding account-input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.account_group_account_no,expression:"account_group_account_no"},{name:"tc-number",rawName:"v-tc-number"}],staticClass:"form-control",attrs:{placeholder:"戶組編號",disabled:t.is_detail||"2"!=t.create_type},domProps:{value:t.account_group_account_no},on:{blur:function(e){return t.get_account_info("account_group_account")},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.add_account("account_group_account")},input:[function(e){e.target.composing||(t.account_group_account_no=e.target.value)},function(e){t.account_group_account_name="",t.account_group_account_id=""}]}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.account_group_account_name,expression:"account_group_account_name"}],staticClass:"form-control",attrs:{placeholder:"戶組名稱",disabled:""},domProps:{value:t.account_group_account_name},on:{input:function(e){e.target.composing||(t.account_group_account_name=e.target.value)}}})]),a("div",{staticClass:"col-2 nopadding account-btn"},[t.is_detail?t._e():a("button",{staticClass:"btn btn-p btn-ml4",attrs:{disabled:"2"!=t.create_type},on:{click:function(e){return t.add_account("account_group_account")}}},[t._v(" 加入 ")])]),a("div",{staticClass:"col-12 account-list"},t._l(t.account_group_accounts,(function(e,n){return a("div",{key:"account_group_account_list_"+e.account_group_account_no,staticClass:"account-list-item"},[a("span",{staticClass:"acc-list-delete-btn",on:{click:function(e){return t.delete_account("account_group_account",n)}}},[a("i",{staticClass:"fa fa-minus-circle"})]),a("label",[t._v(" "+t._s(e.account_group_account_no+" "+e.account_group_account_name)+" ")])])})),0)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:"2"==t.create_type,expression:"create_type == '2'"}],staticClass:"col-4 row nopadding form-group"},[a("div",{staticClass:"col-3 row nopadding"},[a("label",{staticClass:"control-label text-end account-type-label"},[t._v(" 除外戶口編號 ")])]),a("div",{staticClass:"col-9 row nopadding account-group"},[a("div",{staticClass:"col-10 nopadding account-input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.excluded_account_no,expression:"excluded_account_no"},{name:"tc-number",rawName:"v-tc-number"}],staticClass:"form-control",attrs:{placeholder:"戶口編號",disabled:t.is_detail||"2"!=t.create_type||0===t.account_group_accounts.length},domProps:{value:t.excluded_account_no},on:{blur:function(e){return t.get_account_info("excluded_account")},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.add_account("excluded_account")},input:[function(e){e.target.composing||(t.excluded_account_no=e.target.value)},function(e){t.excluded_account_no="",t.excluded_account_id=""}]}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.excluded_account_name,expression:"excluded_account_name"}],staticClass:"form-control",attrs:{placeholder:"戶主名稱",disabled:""},domProps:{value:t.excluded_account_name},on:{input:function(e){e.target.composing||(t.excluded_account_name=e.target.value)}}})]),a("div",{staticClass:"col-2 nopadding account-btn"},[t.is_detail?t._e():a("button",{staticClass:"btn btn-p btn-ml4",attrs:{disabled:"2"!=t.create_type||0===t.account_group_accounts.length},on:{click:function(e){return t.add_account("excluded_account")}}},[t._v(" 加入 ")])]),a("div",{staticClass:"col-12 account-list"},t._l(t.excluded_accounts,(function(e,n){return a("div",{key:"excluded_account_list_"+e.excluded_account_no,staticClass:"account-list-item"},[a("span",{staticClass:"acc-list-delete-btn",on:{click:function(e){return t.delete_account("excluded_account",n)}}},[a("i",{staticClass:"fa fa-minus-circle"})]),a("label",[t._v(" "+t._s(e.excluded_account_no+" "+e.excluded_account_name)+" ")])])})),0)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:"2"==t.create_type,expression:"create_type == '2'"}],staticClass:"col-4 row nopadding form-group"},[a("div",{staticClass:"col-3 row nopadding"},[a("label",{staticClass:"control-label text-end account-type-label"},[t._v(" 除外戶組 ")])]),a("div",{staticClass:"col-9 row nopadding account-group"},[a("div",{staticClass:"col-10 nopadding account-input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.excluded_account_group_account_no,expression:"excluded_account_group_account_no"},{name:"tc-number",rawName:"v-tc-number"}],staticClass:"form-control",attrs:{placeholder:"戶組編號",disabled:t.is_detail||"2"!=t.create_type||0===t.account_group_accounts.length},domProps:{value:t.excluded_account_group_account_no},on:{blur:function(e){return t.get_account_info("excluded_account_group_account")},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.add_account("excluded_account_group_account")},input:[function(e){e.target.composing||(t.excluded_account_group_account_no=e.target.value)},function(e){t.excluded_account_group_account_no="",t.excluded_account_group_account_id=""}]}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.excluded_account_group_account_name,expression:"excluded_account_group_account_name"}],staticClass:"form-control",attrs:{placeholder:"戶組名稱",disabled:""},domProps:{value:t.excluded_account_group_account_name},on:{input:function(e){e.target.composing||(t.excluded_account_group_account_name=e.target.value)}}})]),a("div",{staticClass:"col-2 nopadding account-btn"},[t.is_detail?t._e():a("button",{staticClass:"btn btn-p btn-ml4",attrs:{disabled:"2"!=t.create_type||0===t.account_group_accounts.length},on:{click:function(e){return t.add_account("excluded_account_group_account")}}},[t._v(" 加入 ")])]),a("div",{staticClass:"col-12 account-list"},t._l(t.excluded_account_group_accounts,(function(e,n){return a("div",{key:"excluded_account_group_account_list_"+e.excluded_account_group_account_no,staticClass:"account-list-item"},[a("span",{staticClass:"acc-list-delete-btn",on:{click:function(e){return t.delete_account("excluded_account_group_account",n)}}},[a("i",{staticClass:"fa fa-minus-circle"})]),a("label",[t._v(" "+t._s(e.excluded_account_group_account_no+" "+e.excluded_account_group_account_name)+" ")])])})),0)])])]),a("div",{staticClass:"row g-0 content-area"},[a("div",{staticClass:"form-group row nopadding required"},[a("div",{staticClass:"col-1 row nopadding"},[a("label",{staticClass:"control-label text-end"},[t._v("內容")])]),a("div",{staticClass:"col-7 nopadding"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"form-control",attrs:{rows:"5",required:"",disabled:t.is_detail},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})])])]),a("div",{staticClass:"row g-0 location-area"},[a("div",{staticClass:"col-1"},[a("div",{staticClass:"form-group row nopadding"},[a("label",{staticClass:"control-label text-end"},[t._v("顯示廳館")])])]),a("div",{staticClass:"col-11 row location-list"},[a("div",{staticClass:"form-group col-2"},[a("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"all_show_location_checkbox",disabled:t.is_detail},on:{click:function(e){return t.all_location_click(e)}}}),a("label",{staticClass:"control-label",attrs:{for:"all_show_location_checkbox"}},[t._v("全集團")])]),a("div",{staticClass:"form-group col-10 row g-0 align-items-start"},t._l(t.location_list,(function(e,n){return a("div",{key:"location_item_"+n,staticClass:"form-group col-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.show_location_ids,expression:"show_location_ids"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"show_location_checkbox_"+n,disabled:t.is_detail},domProps:{value:e.location_id,checked:Array.isArray(t.show_location_ids)?t._i(t.show_location_ids,e.location_id)>-1:t.show_location_ids},on:{change:function(a){var n=t.show_location_ids,r=a.target,c=!!r.checked;if(Array.isArray(n)){var o=e.location_id,i=t._i(n,o);r.checked?i<0&&(t.show_location_ids=n.concat([o])):i>-1&&(t.show_location_ids=n.slice(0,i).concat(n.slice(i+1)))}else t.show_location_ids=c}}}),a("label",{staticClass:"control-label",attrs:{for:"show_location_checkbox_"+n}},[t._v(t._s(e.name))])])})),0)])]),a("div",{staticClass:"row g-0 department-area"},[a("div",{staticClass:"col-1"},[a("div",{staticClass:"form-group row nopadding required",class:{"text-d":t.error.department}},[a("label",{staticClass:"control-label text-end"},[t._v("可查閱部門")])])]),a("div",{staticClass:"col-11 row department-list"},[a("div",{staticClass:"form-group col-2"},[a("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"all_permission_department_checkbox",disabled:t.is_detail},on:{click:function(e){return t.all_department_click(e)}}}),a("label",{staticClass:"control-label",attrs:{for:"all_permission_department_checkbox"}},[t._v("全部門")])]),a("div",{staticClass:"form-group col-10 row g-0 align-items-start"},t._l(t.department_list,(function(e,n){return a("div",{key:"department_item_"+n,staticClass:"form-group col-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.permission_department_ids,expression:"permission_department_ids"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"permission_department_checkbox_"+n,disabled:t.is_detail},domProps:{value:e.department_id,checked:Array.isArray(t.permission_department_ids)?t._i(t.permission_department_ids,e.department_id)>-1:t.permission_department_ids},on:{change:function(a){var n=t.permission_department_ids,r=a.target,c=!!r.checked;if(Array.isArray(n)){var o=e.department_id,i=t._i(n,o);r.checked?i<0&&(t.permission_department_ids=n.concat([o])):i>-1&&(t.permission_department_ids=n.slice(0,i).concat(n.slice(i+1)))}else t.permission_department_ids=c}}}),a("label",{staticClass:"control-label",attrs:{for:"permission_department_checkbox_"+n}},[t._v(t._s(e.name))])])})),0)])]),a("div",{staticClass:"row g-0 date-area"},[t.is_create?t._e():a("div",{staticClass:"form-group col-3 row nopadding"},[a("div",{staticClass:"col-4 row nopadding"},[a("label",{staticClass:"control-label text-end"},[t._v("是否完成")])]),a("div",{staticClass:"col-7 nopadding"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.status,expression:"status"}],staticClass:"form-select",attrs:{disabled:t.is_detail},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.status=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"1"}},[t._v("已完成")]),a("option",{attrs:{value:"0"}},[t._v("未完成")])])])]),a("div",{staticClass:"form-group col-3 row nopadding required"},[a("div",{staticClass:"col-4 row nopadding"},[a("label",{staticClass:"control-label text-end"},[t._v("開始時間")])]),a("div",{staticClass:"col-7 nopadding"},[a("DatePicker",{attrs:{"input-attr":{required:"true"},placeholder:"開始時間",format:"YYYY-MM-DD HH:mm","value-type":"format",disabled:t.is_detail},model:{value:t.start_time,callback:function(e){t.start_time=e},expression:"start_time"}})],1)]),a("div",{staticClass:"form-group col-2 row nopadding"},[a("div",{staticClass:"col-6 row nopadding"},[a("label",{staticClass:"control-label text-end"},[t._v("有效天數")])]),a("div",{staticClass:"col-6 nopadding"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.effective_date,expression:"effective_date"},{name:"tc-number",rawName:"v-tc-number"}],staticClass:"form-control",attrs:{placeholder:"有效天數",disabled:t.is_detail},domProps:{value:t.effective_date},on:{change:function(e){return t.change_effective_date()},input:function(e){e.target.composing||(t.effective_date=e.target.value)}}})])]),a("div",{staticClass:"form-group col-3 row nopadding"},[a("div",{staticClass:"col-4 row nopadding"},[a("label",{staticClass:"control-label text-end"},[t._v("完成時間")])]),a("div",{staticClass:"col-7 nopadding complete-time-area"},[t.error.complete_time?a("span",{staticClass:"text-d complete-time-error"},[t._v("完成時間小於開始時間")]):t._e(),a("DatePicker",{attrs:{placeholder:"完成時間",format:"YYYY-MM-DD HH:mm","value-type":"format",disabled:t.is_detail},model:{value:t.complete_time,callback:function(e){t.complete_time=e},expression:"complete_time"}})],1)]),a("div",{staticClass:"col-1 nopadding text-start"},[t.is_detail?t._e():a("button",{staticClass:"btn btn-p",on:{click:function(e){t.complete_time=""}}},[t._v(" 清空 ")])])])]},proxy:!0},{key:"footer",fn:function(){return[t.is_detail?t._e():a("button",{staticClass:"btn btn-new4",attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(t._s(t.is_create?"提交":"儲存"))]),a("button",{staticClass:"btn btn-new4",attrs:{type:"button"},on:{click:function(e){return t.hide()}}},[t._v("離開")])]},proxy:!0}])})},W=[],X=a("c1df"),B=a.n(X),K={getLocationList:"".concat("http://dev-tc-laravel.vc-technology.com","/api/common/location/list"),getDepartmentList:"".concat("http://dev-tc-laravel.vc-technology.com","/api/system-management/department/list"),getAccountInfo:"".concat("http://dev-tc-laravel.vc-technology.com","/api/account-management/account/get-account-info"),createOrderNote:"".concat("http://dev-tc-laravel.vc-technology.com","/api/account-management/remind/create"),getOrderNoteDetail:"".concat("http://dev-tc-laravel.vc-technology.com","/api/account-management/remind/detail"),updateOrderNote:"".concat("http://dev-tc-laravel.vc-technology.com","/api/account-management/remind/update")},Q={name:"edit_form",components:{TCModal:A["a"]},data:function(){return{UI:{title:"新增提醒",title_create:"新增提醒",title_edit:"修改提醒",title_detail:"提醒詳細"},permissions:{},location_id:sessionStorage["location_id"],is_create:!1,is_detail:!1,type_list:[{name:"貸款",value:1},{name:"利息",value:2},{name:"佣金",value:3},{name:"存卡",value:4},{name:"開工留意",value:5},{name:"場面",value:6},{name:"注意",value:7},{name:"補充文件",value:8},{name:"集團備註",value:9}],location_list:[],department_list:[],account_no:"",account_name:"",account_id:"",account_group_account_no:"",account_group_account_name:"",account_group_account_id:"",excluded_account_no:"",excluded_account_name:"",excluded_account_id:"",excluded_account_group_account_no:"",excluded_account_group_account_name:"",excluded_account_group_account_id:"",create_type:"1",type_ids:[],accounts:[],account_group_accounts:[],excluded_accounts:[],excluded_account_group_accounts:[],content:"",show_location_ids:[],permission_department_ids:[],status:"",start_time:"",effective_date:"",complete_time:"",error:{type:!1,account:!1,account_group_account:!1,department:!1,complete_time:!1}}},methods:{create_record:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.is_create=!0,t.is_detail=!1,t.UI.title=t.UI.title_create,e.next=5,t.get_location_list();case 5:return e.next=7,t.get_department_list();case 7:return t.start_time=B()().format("YYYY-MM-DD HH:mm"),$("#all_show_location_checkbox").click(),e.abrupt("return",t.show());case 10:case"end":return e.stop()}}),e)})))()},edit_record:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.is_create=!1,t.is_detail=!1,t.UI.title=t.UI.title_edit,e.next=5,t.get_location_list();case 5:return e.next=7,t.get_department_list();case 7:return e.abrupt("return",t.show());case 8:case"end":return e.stop()}}),e)})))()},detail_record:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.is_create=!1,t.is_detail=!0,t.UI.title=t.UI.title_detail,e.next=5,t.get_location_list();case 5:return e.next=7,t.get_department_list();case 7:return e.abrupt("return",t.show());case 8:case"end":return e.stop()}}),e)})))()},get_location_list:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.axios.get(K.getLocationList).then((function(t){return t}));case 3:if(a=e.sent,200!=a.status){e.next=8;break}t.location_list=a.data.data,e.next=11;break;case 8:return e.next=10,SysUI.alert(t.UI.title,"取得廳列表錯誤, 請重新整理");case 10:return e.abrupt("return");case 11:e.next=18;break;case 13:return e.prev=13,e.t0=e["catch"](0),e.next=17,SysUI.alert(t.UI.title,"取得廳列表錯誤, 請重新整理");case 17:return e.abrupt("return");case 18:case"end":return e.stop()}}),e,null,[[0,13]])})))()},get_department_list:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.axios.get(K.getDepartmentList,{params:{name:"",page:1,limit:100}}).then((function(t){return t}));case 3:if(a=e.sent,200!=a.status){e.next=8;break}t.department_list=a.data.data.data,e.next=11;break;case 8:return e.next=10,SysUI.alert("提醒管理","取得部門列表錯誤, 請重新整理");case 10:return e.abrupt("return");case 11:e.next=18;break;case 13:return e.prev=13,e.t0=e["catch"](0),e.next=17,SysUI.alert("提醒管理","取得部門列表錯誤, 請重新整理");case 17:return e.abrupt("return");case 18:case"end":return e.stop()}}),e,null,[[0,13]])})))()},check_permission:function(t){var e={create:{group_remark:"1_4_1_1_1"},detail:{group_remark:"1_4_3_1_4_1"},edit:{group_remark:"1_4_3_1_5_1"}};return this.is_create?this.permissions[e.create[t]]:this.is_detail?this.permissions[e.detail[t]]:this.permissions[e.edit[t]]},change_create_type:function(t){"1"===t?(this.account_group_account_no="",this.account_group_account_name="",this.account_group_account_id="",this.excluded_account_no="",this.excluded_account_name="",this.excluded_account_id="",this.excluded_account_group_account_no="",this.excluded_account_group_account_name="",this.excluded_account_group_account_id="",this.account_group_accounts=[],this.excluded_accounts=[],this.excluded_account_group_accounts=[]):(this.account_no="",this.account_name="",this.account_id="",this.accounts=[])},get_account_info:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(""===e["".concat(t,"_no")]){a.next=33;break}return n=e.$loading({background:"rgba(0,0,0,0.4)",text:"請求資料中.."}),a.prev=2,a.next=5,e.axios.get(K.getAccountInfo,{params:{account_no:e["".concat(t,"_no")]}}).then((function(t){return t}));case 5:if(r=a.sent,n.close(),200!==r.status){a.next=21;break}if(!r.data.data.account_id){a.next=15;break}return e["".concat(t,"_no")]=r.data.data.account_no,e["".concat(t,"_name")]=r.data.data.full_name,e["".concat(t,"_id")]=r.data.data.account_id,a.abrupt("return");case 15:return e["".concat(t,"_no")]="",e["".concat(t,"_name")]="",e["".concat(t,"_id")]="",a.next=20,SysUI.alert(e.UI.title,"戶口編號不存在");case 20:return a.abrupt("return");case 21:a.next=33;break;case 23:return a.prev=23,a.t0=a["catch"](2),n.close(),e["".concat(t,"_no")]="",e["".concat(t,"_name")]="",e["".concat(t,"_id")]="",console.log("error",a.t0.response),a.next=32,SysUI.alert(e.UI.title,a.t0.response.data.message);case 32:return a.abrupt("return");case 33:case"end":return a.stop()}}),a,null,[[2,23]])})))()},add_account:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.get_account_info(t);case 2:""!==e["".concat(t,"_id")]&&(n={},n["".concat(t,"_no")]=e["".concat(t,"_no")],n["".concat(t,"_name")]=e["".concat(t,"_name")],n["".concat(t,"_id")]=e["".concat(t,"_id")],r=e["".concat(t,"s")].map((function(e){return e["".concat(t,"_id")]})),-1===r.indexOf(e["".concat(t,"_id")])&&e["".concat(t,"s")].push(n),e["".concat(t,"_no")]="",e["".concat(t,"_name")]="",e["".concat(t,"_id")]="");case 3:case"end":return a.stop()}}),a)})))()},delete_account:function(t,e){this["".concat(t,"s")].splice(e,1)},all_location_click:function(t){var e=this,a=t.target.checked+0,n=this.location_list.map((function(t){return t.location_id}));1===a?n.forEach((function(t){-1===e.show_location_ids.indexOf(t)&&e.show_location_ids.push(t)})):n.forEach((function(t){-1!==e.show_location_ids.indexOf(t)&&e.show_location_ids.splice(e.show_location_ids.indexOf(t),1)}))},all_department_click:function(t){var e=this,a=t.target.checked+0,n=this.department_list.map((function(t){return t.department_id}));1===a?n.forEach((function(t){-1===e.permission_department_ids.indexOf(t)&&e.permission_department_ids.push(t)})):n.forEach((function(t){-1!==e.permission_department_ids.indexOf(t)&&e.permission_department_ids.splice(e.permission_department_ids.indexOf(t),1)}))},change_effective_date:function(){""===this.start_time||null===this.start_time?this.complete_time="":""!==this.effective_date?this.complete_time=B()(this.start_time).add(this.effective_date,"days").format("YYYY-MM-DD HH:mm"):this.complete_time=""},validates:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=!0,a=check_form_is_valid($(t.$el),!0),Object.assign(t.$data.error,t.$options.data().error),0===t.type_ids.length&&(t.error.type=!0,a=!1),"1"==t.create_type?0===t.accounts.length&&(t.error.account=!0,a=!1):0===t.account_group_accounts.length&&(t.error.account_group_account=!0,a=!1),0===t.permission_department_ids.length&&(t.error.department=!0,a=!1),t.start_time>t.complete_time&&(t.error.complete_time=!0,a=!1),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))()},save:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a,n,r,c,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.validates();case 2:if(a=e.sent,a){e.next=5;break}return e.abrupt("return");case 5:return n=t.$loading({background:"rgba(0,0,0,0.4)",text:"請求資料中.."}),r=t.is_create?K.createOrderNote:K.updateOrderNote,c=t.is_create?"post":"put",e.prev=8,e.next=11,t.axios[c](r,{type_ids:t.type_ids,accounts:t.accounts,account_group_accounts:t.account_group_accounts,excluded_accounts:t.excluded_accounts,excluded_account_group_accounts:t.excluded_account_group_accounts,content:t.content,show_location_ids:t.show_location_ids,permission_department_ids:t.permission_department_ids,start_time:t.start_time,complete_time:t.complete_time,location_id:t.location_id}).then((function(t){return t}));case 11:if(o=e.sent,n.close(),200!=o.status){e.next=17;break}t.hide(1),e.next=20;break;case 17:return e.next=19,SysUI.alert(t.UI.title,o.data.message);case 19:return e.abrupt("return");case 20:e.next=29;break;case 22:return e.prev=22,e.t0=e["catch"](8),n.close(),console.log("error",e.t0.response),e.next=28,SysUI.alert(t.UI.title,e.t0.response.data.message);case 28:return e.abrupt("return");case 29:case"end":return e.stop()}}),e,null,[[8,22]])})))()},show:function(){return this.$refs.modal.show()},hide:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.reset(),this.$refs.modal.hide(t)},reset:function(){Object.assign(this.$data,this.$options.data()),remove_form_has_error($(this.$el)),$("#all_show_location_checkbox").prop("checked",!1),$("#all_permission_department_checkbox").prop("checked",!1)}}},V=Q,Z=(a("cdd4"),Object(f["a"])(V,G,W,!1,null,"f7d420fe",null)),tt=Z.exports,et={getDepartmentList:"".concat("http://dev-tc-laravel.vc-technology.com","/api/system-management/department/list"),getLocationList:"".concat("http://dev-tc-laravel.vc-technology.com","/api/common/location/list")},at={name:"order_note",components:{FilterInputField:s["a"],FilterSelectField:l["a"],FilterAccountGroupField:d["a"],FilterOrderNameField:h,FilterDepartmentField:w,FilterLocationField:C["a"],FilterDateFiled:O["a"],PageRemark:F["a"],AccountGroupForm:N["a"],OrderNameForm:U,DepartmentForm:q,LocationForm:H["a"],EditForm:tt},data:function(){return{department_list:[],location_list:[],fields:[],list:[],filters:{type_ids:[],account_no:"",account_group:"",status:"",start_date:"",complete_date:"",keyword:"",permission_department_ids:[],show_location_ids:[],staff_name:"",page:1,limit:20},hidden_fields:[],operation_width:"100px",selected_index:[],footer_total:"",permissions:{}}},computed:{filter_fields:function(){var t=this,e=this.fields,a=[];return e.forEach((function(e){t.hidden_fields.includes(e.key)||(a=[].concat(Object(i["a"])(a),[e]))})),a}},created:function(){this.get_columns(),this.set_permission(),this.get_department_list(),this.get_location_list()},methods:{operation_col_width:function(){return{width:this.operation_width,"min-width":this.operation_width,"max-width":this.operation_width}},pageSearch:function(t){this.filters=Object(o["a"])(Object(o["a"])({},this.filters),t),this.search()},get_columns:function(){this.fields=J()},get_department_list:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.axios.get(et.getDepartmentList,{params:{name:"",page:1,limit:100}}).then((function(t){return t}));case 3:if(a=e.sent,200!=a.status){e.next=8;break}t.department_list=a.data.data.data,e.next=11;break;case 8:return e.next=10,SysUI.alert("提醒管理","取得部門列表錯誤, 請重新整理");case 10:return e.abrupt("return");case 11:e.next=18;break;case 13:return e.prev=13,e.t0=e["catch"](0),e.next=17,SysUI.alert("提醒管理","取得部門列表錯誤, 請重新整理");case 17:return e.abrupt("return");case 18:case"end":return e.stop()}}),e,null,[[0,13]])})))()},get_location_list:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.axios.get(et.getLocationList).then((function(t){return t}));case 3:if(a=e.sent,200!=a.status){e.next=8;break}t.location_list=a.data.data,e.next=11;break;case 8:return e.next=10,SysUI.alert("提醒管理","取得廳列表錯誤, 請重新整理");case 10:return e.abrupt("return");case 11:e.next=18;break;case 13:return e.prev=13,e.t0=e["catch"](0),e.next=17,SysUI.alert("提醒管理","取得廳列表錯誤, 請重新整理");case 17:return e.abrupt("return");case 18:case"end":return e.stop()}}),e,null,[[0,13]])})))()},getOpenOrderNameForm:function(t,e){var a=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a.$refs.order_name_form.edit_record(t,a.filters[e]);case 2:r=n.sent,r&&(a.filters[e]=r);case 4:case"end":return n.stop()}}),n)})))()},getOpenAccountGroupForm:function(t,e){var a=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a.$refs.account_group_form.edit_record(t);case 2:r=n.sent,r&&(a.filters[e]=r.account_no);case 4:case"end":return n.stop()}}),n)})))()},getOpenDepartmentForm:function(t,e){var a=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a.$refs.department_form.edit_record(t,a.filters[e]);case 2:r=n.sent,r&&(a.filters[e]=r);case 4:case"end":return n.stop()}}),n)})))()},getOpenLocationForm:function(t,e){var a=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a.$refs.location_form.edit_record(t,a.filters[e]);case 2:r=n.sent,r&&(a.filters[e]=r);case 4:case"end":return n.stop()}}),n)})))()},search:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t.filters);case 1:case"end":return e.stop()}}),e)})))()},reset:function(){var t=JSON.parse(JSON.stringify(this.filters)),e=t.limit,a=t.page;Object.assign(this.$data.filters,this.$options.data().filters),this.filters.limit=e,this.filters.page=a},create_order_note:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$refs.edit_form.permissions=t.permissions,e.next=3,t.$refs.edit_form.create_record();case 3:a=e.sent,a&&t.search();case 5:case"end":return e.stop()}}),e)})))()},detail_order_note:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.edit_form.permissions=e.permissions,e.$refs.edit_form.detail_record();case 2:case"end":return t.stop()}}),t)})))()},edit_order_note:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$refs.edit_form.permissions=e.permissions,t.next=3,e.$refs.edit_form.edit_record();case 3:a=t.sent,a&&e.search();case 5:case"end":return t.stop()}}),t)})))()},sync_thead_scroll:function(){$(this.$refs.thead).scrollLeft($(this.$refs.tbody).scrollLeft())},getHiddenFields:function(t){this.hidden_fields=t},select_display_fields:function(){this.$refs.displayColumn.show()},handle_acitve_tr:function(t){-1==this.selected_index.indexOf(t)?this.selected_index.push(t):this.selected_index.splice(this.selected_index.indexOf(t),1)},set_permission:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.permissions=getModulePermissions(),a={account_no:"1_4_3_2_2",name:"1_4_3_2_3",type:"1_4_3_2_4",content:"1_4_3_2_5",start_time:"1_4_3_2_6",complete_time:"1_4_3_2_7",status:"1_4_3_2_8",permission_departments:"1_4_3_2_9",staff_position:"1_4_3_2_10",show_locations:"1_4_3_2_11",location:"1_4_3_2_12",updated_at:"1_4_3_2_13",staff_name:"1_4_3_2_14"},t.fields=t.fields.filter((function(e){return a[e.key]?t.permissions[a[e.key]]?e:void t.hidden_fields.push(e.key):e}));case 3:case"end":return e.stop()}}),e)})))()}}},nt=at,rt=Object(f["a"])(nt,n,r,!1,null,null,null);e["default"]=rt.exports},ca3a:function(t,e,a){"use strict";a("550c")},cdd4:function(t,e,a){"use strict";a("765a")},fdd2:function(t,e,a){}}]);
//# sourceMappingURL=chunk-46a890b6.21d1dc0c.js.map
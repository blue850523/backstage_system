(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2022d620"],{1746:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.size},[a("div",{staticClass:"form-group row nopadding"},[a("div",{staticClass:"nopadding",class:t.label_size},[a("div",{staticClass:"filter-title"},[a("label",{staticClass:"control-label",attrs:{for:t.id}},[t._v(t._s(t.label))])])]),a("div",{staticClass:"nopadding",class:t.input_size},[a("DatePicker",{attrs:{type:t.type,name:t.name,id:t.id,"value-type":"format",placeholder:t.label},on:{input:function(e){return t.input()}},model:{value:t.dateVal,callback:function(e){t.dateVal=e},expression:"dateVal"}})],1)])])},r=[],i={name:"filter_input_field",data:function(){return{dateVal:""}},props:{label:{type:String,default:"請傳入label"},name:{type:String,default:"請傳入name"},id:{type:String,default:""},size:{type:String,default:"col-md-3"},label_size:{type:String,default:"col-5"},input_size:{type:String,default:"col-5"},type:{type:String,default:"date"},value:{type:String,default:""}},methods:{input:function(){this.$emit("input",this.dateVal)}}},o=i,n=a("2877"),l=Object(n["a"])(o,s,r,!1,null,null,null);e["a"]=l.exports},"38f5":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group",class:t.get_classes()},[t.label&&t.label.length?a("label",{staticClass:"control-label",class:t.get_label_class(),staticStyle:{"":":before"},on:{click:function(e){t.clickable_label&&t.$emit("label-click")}}},[t._v(" "+t._s(t.label)+" ")]):t._e(),t._t("default")],2)},r=[],i={name:"tc_form_group",props:{hasError:{type:Boolean,default:!1},required:{type:Boolean,default:!1},grid_col_md_2:{type:Boolean,default:!1},label:{type:String,default:""},clickable_label:{type:Boolean,default:!1}},methods:{get_classes:function(){return{"has-error":this.hasError,"has-custom-error":this.hasError,required:this.required,"grid-col-md-2":this.grid_col_md_2,"not-required":!this.required}},get_label_class:function(){return{"as-link":this.clickable_label}}}},o=i,n=(a("97c0"),a("2877")),l=Object(n["a"])(o,s,r,!1,null,null,null);e["a"]=l.exports},"3ea2":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.size},[a("div",{staticClass:"form-group row nopadding"},[a("div",{staticClass:"nopadding",class:t.label_size},[a("div",{staticClass:"filter-title"},[a("label",{staticClass:"control-label",attrs:{for:t.id}},[t._v(t._s(t.label))])])]),a("div",{staticClass:"nopadding",class:t.input_size},[a("input",{staticClass:"form-control",attrs:{type:t.type,name:t.name,placeholder:t.label,maxlength:t.maxlength,id:t.id},domProps:{value:t.value},on:{input:function(e){return t.input(e)}}})])])])},r=[],i=(a("ac1f"),a("466d"),a("5319"),{name:"filter_input_field",props:{label:{type:String,default:"請傳入label"},name:{type:String,default:"請傳入name"},id:{type:String,default:""},size:{type:String,default:"col-3"},label_size:{type:String,default:"col-5"},input_size:{type:String,default:"col-5"},type:{type:String,default:"text"},value:{type:String,default:""},maxlength:{type:String,default:""},only_number:{type:Boolean,default:!1},only_big_en_and_number:{type:Boolean,default:!1}},methods:{input:function(t){if(this.only_number){var e=t.target.value,a=e.match(/[\d]+/g);$(t.target).val(a?a[0]:"")}else if(this.only_big_en){var s=t.target.value;$(t.target).val(s.replace(/[^\w\/]/gi,"").toUpperCase())}this.$emit("input",t.target.value)}}}),o=i,n=a("2877"),l=Object(n["a"])(o,s,r,!1,null,null,null);e["a"]=l.exports},4264:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.size},[a("div",{staticClass:"form-group row nopadding"},[a("div",{staticClass:"nopadding",class:t.label_size},[a("div",{staticClass:"filter-title"},[a("label",{staticClass:"control-label",attrs:{for:t.id}},[t._v(t._s(t.label))])])]),a("div",{staticClass:"nopadding",class:t.input_size},[a("select",{staticClass:"form-select",attrs:{id:t.id,name:t.name},on:{change:function(e){return t.$emit("input",e.target.value)}}},t._l(t.options,(function(e,s){return a("option",{key:s,domProps:{value:e.value}},[t._v(" "+t._s(e.option||e.name||e.text)+" ")])})),0)])])])},r=[],i={name:"filter_select_field",props:{label:{type:String,default:"請傳入Label"},name:{type:String,default:"請傳入Name"},id:{type:String,default:"id"+void 0},options:{type:Array,default:[{value:0,option:"test"}]},size:{type:String,default:"col-3"},label_size:{type:String,default:"col-5"},input_size:{type:String,default:"col-5"}}},o=i,n=a("2877"),l=Object(n["a"])(o,s,r,!1,null,null,null);e["a"]=l.exports},"5fec":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"modal",staticClass:"modal fade",attrs:{"data-bs-backdrop":"false","data-bs-keyboard":"false",tabindex:"-1"}},[a("div",{staticClass:"modal-dialog modal-lg",style:t.get_dialog_style()},[a("div",{staticClass:"modal-content watermark-container"},[a("WaterMarker"),a("div",{staticClass:"modal-header"},[t._t("header",(function(){return[a("span",{staticClass:"modal-title"},[t._v(" "+t._s(t.title)+" ")])]}))],2),a("div",{ref:"modal_body",staticClass:"modal-body",style:t.get_modal_body_style()},[a("input",{staticStyle:{display:"none"}}),a("input",{staticStyle:{display:"none"},attrs:{type:"password"}}),t._t("body")],2),a("div",{staticClass:"modal-footer"},[t._t("footer",(function(){return[a("button",{staticClass:"btn btn-new4",on:{click:function(e){return t.hide()}}},[t._v(" 離開 ")])]}))],2)],1)]),t._t("default")],2)},r=[],i=(a("d3b7"),a("a847")),o={name:"tc-modal",components:{WaterMarker:i["a"]},data:function(){return{p_resolve:null}},model:{prop:"value",event:"change"},props:{title:{type:String,default:"未獲取Tittle"},dialogStyle:Object,modalBodyStyle:Object,body_min_height:{type:String,default:"680px"},dialog_width:{type:String,default:"1600px"}},created:function(){},computed:{},methods:{get_dialog_style:function(){return Object.assign({"max-width":this.dialog_width},this.dialogStyle)},get_modal_body_style:function(){return Object.assign({"min-height":this.body_min_height,"max-height":"680px"},this.modalBodyStyle)},show:function(){var t=this,e=$(this.$refs.modal);return e.modal("show"),SysUI.set_backdrop(e,!0),$(this.$refs.modal_body).scrollTop(0),new Promise((function(e){return t.p_resolve=e}))},hide:function(t){$(this.$refs.modal).modal("hide"),this.p_resolve(t)}}},n=o,l=a("2877"),c=Object(l["a"])(n,s,r,!1,null,null,null);e["a"]=c.exports},8475:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("select",{staticClass:"form-select",attrs:{disabled:t.disabled},on:{change:function(e){t.change(e),t.validate}}},[t.allowEmpty?a("option",{domProps:{value:t.emptyValue}},[t._v(t._s(t.emptyText))]):t._e(),t._t("default",(function(){return t._l(t.options,(function(e,s){return a("option",{key:s,attrs:{disabled:e.disabled},domProps:{value:e.value,selected:e.value===t.value}},[t._v(" "+t._s(e.text||e.name)+" ")])}))}))],2)},r=[],i=(a("a9e3"),{name:"TCDropdown",model:{prop:"value",event:"change"},props:{value:null,options:{type:Array,default:function(){return[{text:"請傳入資料 須包含text或name 以及value",value:"",disabled:!1}]}},allowEmpty:{type:Boolean,default:!0},emptyText:{type:String,default:""},emptyValue:{type:[String,Number,Object,Boolean,null],default:null},validate:Function,disabled:Boolean},methods:{change:function(t){this.$emit("change",t.target.value)}}}),o=i,n=a("2877"),l=Object(n["a"])(o,s,r,!1,null,null,null);e["a"]=l.exports},"885d":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"accmanage"},[a("div",{staticClass:"vc-panel",attrs:{id:"main-panel"}},[a("div",{staticClass:"vc-panel-heading"},[a("span",{staticClass:"vc-panel-title"},[t._v("職員管理")]),a("div",{staticClass:"pull-right"},[a("button",{staticClass:"btn btn-new",attrs:{id:"AccManagement_AccManage_Btn_CreateAcc"},on:{click:t.createStaff}},[t._v(" 新增職員 ")])])]),a("div",{staticClass:"vc-panel-body"},[a("form",{staticClass:"vc-panel-body-search watermark-container",attrs:{id:"search-panel"}},[a("WaterMark"),a("div",{staticClass:"subTitle",staticStyle:{"justify-content":"space-between"}},[t._v(" 選擇搜尋條件 ")]),a("div",{staticClass:"vc-panel-body-search-row row row-cols-4 gx-0 gy-1"},[a("FilterInputField",{attrs:{label:"職員編號",name:"filter_staff_no",id:"id_staff_no"},model:{value:t.filters.staff_no,callback:function(e){t.$set(t.filters,"staff_no",e)},expression:"filters.staff_no"}}),a("FilterInputField",{attrs:{label:"姓名",name:"filter_name",id:"id_name"},model:{value:t.filters.name,callback:function(e){t.$set(t.filters,"name",e)},expression:"filters.name"}}),a("FilterInputField",{attrs:{label:"連絡電話",name:"filter_phone",id:"id_phone"},model:{value:t.filters.phone,callback:function(e){t.$set(t.filters,"phone",e)},expression:"filters.phone"}}),a("FilterSelectField",{attrs:{label:"職位",name:"filter_department",id:"id_department",options:t.position_option},model:{value:t.filters.user_position_id,callback:function(e){t.$set(t.filters,"user_position_id",e)},expression:"filters.user_position_id"}}),a("FilterSelectField",{attrs:{label:"權限廳",name:"filter_permission_location_id",id:"id_permission_location_id",options:t.locs},model:{value:t.filters.permission_location_id,callback:function(e){t.$set(t.filters,"permission_location_id",e)},expression:"filters.permission_location_id"}}),a("FilterSelectField",{attrs:{label:"默認廳",name:"filter_default_location_id",id:"id_default_location_id",options:t.locs},model:{value:t.filters.default_location_id,callback:function(e){t.$set(t.filters,"default_location_id",e)},expression:"filters.default_location_id"}})],1),a("div",{staticClass:"vc-panel-body-search-row row g-0"},[a("div",{staticClass:"col text-end"},[a("button",{staticClass:"btn btn-primary",staticStyle:{"margin-right":"4px"},attrs:{type:"button"},on:{click:function(e){return t.search()}}},[t._v(" 搜尋 ")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"reset"}},[t._v(" 重置 ")])])])],1),a("div",{staticClass:"vc-panel-body-list",attrs:{id:"list-panel"}},[a("div",{staticClass:"subTitle",staticStyle:{"justify-content":"space-between"}},[t._v(" 檢視搜尋結果 "),a("div",{staticClass:"text-end"},[a("button",{staticClass:"btn btn-new5",staticStyle:{"margin-left":"4px"},on:{click:t.select_display_fields}},[t._v(" 篩選顯示 ")]),a("button",{staticClass:"btn btn-new2",staticStyle:{"margin-left":"4px"}},[t._v(" 列印 ")]),a("button",{staticClass:"btn btn-new3",staticStyle:{"margin-left":"4px"}},[t._v(" 匯出EXCEL ")])])]),a("div",{staticClass:"vc-panel-body-list-table"},[a("div",{staticClass:"table-container watermark-container"},[a("WaterMark"),a("div",{ref:"thead",staticClass:"table-responsive nopadding thead"},[a("table",{staticClass:"table table-bordered"},[a("thead",[a("tr",{staticClass:"table-title-bar"},[a("th",{staticClass:"text-center field-scale-1"},[t._v(" 操作 ")]),t._l(t.filter_fields,(function(e){return a("th",{key:e.key,staticClass:"text-center",class:"field-scale-"+e.scale},[t._v(" "+t._s(e.label)+" ")])}))],2)])])]),a("div",{ref:"tbody",staticClass:"table-responsive nopadding tbody",on:{scroll:function(e){return t.sync_thead_scroll()}}},[a("table",{staticClass:"table table-bordered table-hover"},[a("tbody",t._l(t.list,(function(e,s){return a("tr",{key:s,class:{selectedTr:t.selected_index.includes(s)},on:{click:function(e){return t.handle_acitve_tr(s)}}},[a("td",{staticClass:"text-center field-scale-1"},[a("button",{staticClass:"btn btn-w btn-mr4",attrs:{type:"button"},on:{click:function(a){return t.edit(e.user_id)}}},[t._v(" 修改 ")])]),t._l(t.filter_fields,(function(s){return a("td",{key:s.key,staticClass:"text-left",class:"field-scale-"+s.scale},[a("span",{class:{"text-danger":"有效"==e[s.key]}},[t._v(t._s(e[s.key]))])])}))],2)})),0)])])],1)])])]),a("Pagination",{ref:"page",on:{searchService:t.pageSearch}})],1),a("div",[a("DisplayColumn",{ref:"displayColumn",attrs:{fields:t.fields},on:{hidden_fields:t.getHiddenFields}}),a("EditForm",{ref:"editForm"})],1)])},r=[],i=a("1da1"),o=a("5530"),n=a("2909"),l=(a("96cf"),a("d3b7"),a("159b"),a("caad"),a("2532"),a("99af"),a("ac1f"),a("841c"),a("a434"),a("3ea2")),c=a("1746"),d=a("4264"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("TCModal",{ref:"modal",attrs:{id:"edit_form",title:t.UI.title,body_min_height:"fit-content",dialog_width:"1200px"},scopedSlots:t._u([{key:"body",fn:function(){return[a("div",{staticClass:"align-items-center row"},[a("div",{staticClass:"col-4 row"},[a("TCFormGroup",{staticClass:"col-4",attrs:{label:"職員編號",required:""}}),a("TCFormGroup",{staticClass:"col-8",attrs:{required:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.records.staff_no,expression:"records.staff_no"}],staticClass:"form-control",attrs:{placeholder:"職員編號",disabled:!t.is_create},domProps:{value:t.records.staff_no},on:{input:function(e){e.target.composing||t.$set(t.records,"staff_no",e.target.value)}}})])],1),a("div",{staticClass:"col-4 row"},[a("TCFormGroup",{staticClass:"col-4",attrs:{label:"用戶名",required:""}}),a("TCFormGroup",{staticClass:"col-8",attrs:{required:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.records.username,expression:"records.username"}],staticClass:"form-control",attrs:{placeholder:"用戶名"},domProps:{value:t.records.username},on:{input:function(e){e.target.composing||t.$set(t.records,"username",e.target.value)}}})])],1),a("div",{staticClass:"col-4 row"},[a("TCFormGroup",{staticClass:"col-4",attrs:{label:"姓名",required:""}}),a("TCFormGroup",{staticClass:"col-8",attrs:{required:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.records.name,expression:"records.name"}],staticClass:"form-control",attrs:{placeholder:"姓名"},domProps:{value:t.records.name},on:{input:function(e){e.target.composing||t.$set(t.records,"name",e.target.value)}}})])],1),a("div",{staticClass:"col-4 row mt-3"},[a("TCFormGroup",{staticClass:"col-4",attrs:{label:"別名"}}),a("TCFormGroup",{staticClass:"col-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.records.nickname,expression:"records.nickname"}],staticClass:"form-control",attrs:{placeholder:"別名"},domProps:{value:t.records.nickname},on:{input:function(e){e.target.composing||t.$set(t.records,"nickname",e.target.value)}}})])],1),a("div",{staticClass:"col-4 row mt-3"},[a("TCFormGroup",{staticClass:"col-4",attrs:{label:"部門",required:""}}),a("TCFormGroup",{staticClass:"col-8",attrs:{required:""}},[a("TCDropdown",{attrs:{options:t.department_options,required:""},on:{change:t.getDepartmentChange},model:{value:t.records.user_department_id,callback:function(e){t.$set(t.records,"user_department_id",e)},expression:"records.user_department_id"}})],1)],1),a("div",{staticClass:"col-4 row mt-3"},[a("TCFormGroup",{staticClass:"col-4",attrs:{label:"職位名稱",required:""}}),a("TCFormGroup",{staticClass:"col-8",attrs:{required:""}},[a("TCDropdown",{attrs:{options:t.position_options,required:""},model:{value:t.records.user_position_id,callback:function(e){t.$set(t.records,"user_position_id",e)},expression:"records.user_position_id"}})],1)],1),a("div",{staticClass:"col-4 row mt-3"},[a("TCFormGroup",{staticClass:"col-4",attrs:{label:"密碼",required:""}}),a("TCFormGroup",{staticClass:"col-8",attrs:{required:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.records.password,expression:"records.password"}],staticClass:"form-control",attrs:{placeholder:"密碼"},domProps:{value:t.records.password},on:{input:function(e){e.target.composing||t.$set(t.records,"password",e.target.value)}}})])],1),a("div",{staticClass:"col-4 row mt-3"},[a("TCFormGroup",{staticClass:"col-4",attrs:{label:"Pin碼",required:""}}),a("TCFormGroup",{staticClass:"col-8",attrs:{required:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.records.pin,expression:"records.pin"}],staticClass:"form-control",attrs:{placeholder:"Pin碼"},domProps:{value:t.records.pin},on:{input:function(e){e.target.composing||t.$set(t.records,"pin",e.target.value)}}})])],1),a("div",{staticClass:"col-4 row mt-3"},[a("TCFormGroup",{staticClass:"col-4",attrs:{label:"國籍"}}),a("TCFormGroup",{staticClass:"col-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.records.nationality,expression:"records.nationality"}],staticClass:"form-control",attrs:{placeholder:"國籍"},domProps:{value:t.records.nationality},on:{input:function(e){e.target.composing||t.$set(t.records,"nationality",e.target.value)}}})])],1),a("div",{staticClass:"col-4 row mt-3"},[a("TCFormGroup",{staticClass:"col-4",attrs:{label:"出生日期"}}),a("TCFormGroup",{staticClass:"col-8"},[a("DatePicker",{attrs:{type:"date","value-type":"format",placeholder:"出生日期"},model:{value:t.records.birthday,callback:function(e){t.$set(t.records,"birthday",e)},expression:"records.birthday"}})],1)],1),a("div",{staticClass:"col-4 row mt-3"},[a("TCFormGroup",{staticClass:"col-4",attrs:{label:"性別"}}),a("TCFormGroup",{staticClass:"col-8"},[a("TCDropdown",{attrs:{options:t.gender_options},model:{value:t.records.gender,callback:function(e){t.$set(t.records,"gender",e)},expression:"records.gender"}})],1)],1),a("div",{staticClass:"col-4 row mt-3"},[a("TCFormGroup",{staticClass:"col-4",attrs:{label:"證件號碼"}}),a("TCFormGroup",{staticClass:"col-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.records.id_no,expression:"records.id_no"}],staticClass:"form-control",attrs:{placeholder:"證件號碼"},domProps:{value:t.records.id_no},on:{input:function(e){e.target.composing||t.$set(t.records,"id_no",e.target.value)}}})])],1),a("div",{staticClass:"col-4 row mt-3"},[a("TCFormGroup",{staticClass:"col-4",attrs:{label:"學歷"}}),a("TCFormGroup",{staticClass:"col-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.records.education,expression:"records.education"}],staticClass:"form-control",attrs:{placeholder:"學歷"},domProps:{value:t.records.education},on:{input:function(e){e.target.composing||t.$set(t.records,"education",e.target.value)}}})])],1),a("div",{staticClass:"col-4 row mt-3"},[a("TCFormGroup",{staticClass:"col-4",attrs:{label:"入職日期"}}),a("TCFormGroup",{staticClass:"col-8"},[a("DatePicker",{attrs:{type:"date","value-type":"format",placeholder:"入職日期"},model:{value:t.records.entry_date,callback:function(e){t.$set(t.records,"entry_date",e)},expression:"records.entry_date"}})],1)],1),a("div",{staticClass:"col-4 row mt-3"},[a("TCFormGroup",{staticClass:"col-4",attrs:{label:"拍卡卡號",required:""}}),a("TCFormGroup",{staticClass:"col-8",attrs:{required:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.records.pi_card_no,expression:"records.pi_card_no"}],staticClass:"form-control",attrs:{placeholder:"拍卡卡號"},domProps:{value:t.records.pi_card_no},on:{input:function(e){e.target.composing||t.$set(t.records,"pi_card_no",e.target.value)}}})])],1),a("div",{staticClass:"col-4 row mt-3"},[a("TCFormGroup",{staticClass:"col-4",attrs:{label:"連絡電話"}}),a("TCFormGroup",{staticClass:"col-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.records.phone,expression:"records.phone"}],staticClass:"form-control",attrs:{placeholder:"連絡電話"},domProps:{value:t.records.phone},on:{input:function(e){e.target.composing||t.$set(t.records,"phone",e.target.value)}}})])],1),a("div",{staticClass:"col-4 row mt-3"},[a("TCFormGroup",{staticClass:"col-4",attrs:{label:"電子信箱"}}),a("TCFormGroup",{staticClass:"col-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.records.email,expression:"records.email"}],staticClass:"form-control",attrs:{placeholder:"電子信箱"},domProps:{value:t.records.email},on:{input:function(e){e.target.composing||t.$set(t.records,"email",e.target.value)}}})])],1),a("div",{staticClass:"col-4 row mt-3"},[a("TCFormGroup",{staticClass:"col-4",attrs:{label:"基本薪金"}}),a("TCFormGroup",{staticClass:"col-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.records.salary,expression:"records.salary"}],staticClass:"form-control",attrs:{placeholder:"基本薪金"},domProps:{value:t.records.salary},on:{input:function(e){e.target.composing||t.$set(t.records,"salary",e.target.value)}}})])],1),a("div",{staticClass:"col-4 row mt-3"},[a("TCFormGroup",{staticClass:"col-4",attrs:{label:"聯絡地址"}}),a("TCFormGroup",{staticClass:"col-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.records.address,expression:"records.address"}],staticClass:"form-control",attrs:{placeholder:"聯絡地址"},domProps:{value:t.records.address},on:{input:function(e){e.target.composing||t.$set(t.records,"address",e.target.value)}}})])],1),a("div",{staticClass:"col-4 row mt-3"},[a("TCFormGroup",{staticClass:"col-4",attrs:{label:"備註"}}),a("TCFormGroup",{staticClass:"col-8"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.records.note,expression:"records.note"}],staticClass:"form-control",attrs:{placeholder:"備註"},domProps:{value:t.records.note},on:{input:function(e){e.target.composing||t.$set(t.records,"note",e.target.value)}}})])],1),a("div",{staticClass:"col-4 row mt-3"}),a("div",{staticClass:"col-4 row mt-3"},[a("TCFormGroup",{staticClass:"col-4",attrs:{label:"默認廳",required:""}}),a("TCFormGroup",{staticClass:"col-8",attrs:{required:""}},[a("TCDropdown",{attrs:{options:t.default_location_options,required:""},model:{value:t.records.default_location_id,callback:function(e){t.$set(t.records,"default_location_id",e)},expression:"records.default_location_id"}})],1)],1),a("div",{staticClass:"col-4 row mt-3"},[a("TCFormGroup",{staticClass:"col-4",attrs:{required:""}},[a("el-checkbox",{on:{change:t.selectAllLoc},model:{value:t.isClickAll,callback:function(e){t.isClickAll=e},expression:"isClickAll"}},[t._v("全選")])],1)],1),a("div",{staticClass:"col-4 row mt-3"}),a("div",{staticClass:"col-4 row mt-3"},[a("TCFormGroup",{staticClass:"col-4",attrs:{label:"權限廳",required:""}}),a("TCFormGroup",{staticClass:"col-8",attrs:{required:""}},[a("div",{staticClass:"mt-3"},[a("el-checkbox-group",{model:{value:t.checkedLoc,callback:function(e){t.checkedLoc=e},expression:"checkedLoc"}},t._l(t.locs,(function(e){return a("el-checkbox",{key:e.value,attrs:{label:e.value,value:e.value}},[t._v(t._s(e.name))])})),1)],1)])],1)])]},proxy:!0},{key:"footer",fn:function(){return[a("button",{staticClass:"btn btn-new4",attrs:{type:"button"},on:{click:function(e){return t.submit()}}},[t._v(" 保存 ")]),a("button",{staticClass:"btn btn-new4",attrs:{type:"button"},on:{click:function(e){return t.hide(0)}}},[t._v(" 離開 ")])]},proxy:!0}])})],1)},p=[],m=(a("b0c0"),a("d81d"),a("5fec")),f=a("38f5"),_=a("8475"),v=a("9801"),h={getDepartmentList:"".concat("http://dev-tc-laravel.vc-technology.com","/api/system-management/department/list"),getPositionList:"".concat("http://dev-tc-laravel.vc-technology.com","/api/system-management/position/list"),createUser:"".concat("http://dev-tc-laravel.vc-technology.com","/api/system-management/user/create"),updateUser:"".concat("http://dev-tc-laravel.vc-technology.com","/api/system-management/user/update"),userDetail:"".concat("http://dev-tc-laravel.vc-technology.com","/api/system-management/user/detail")},g={name:"edit_form",components:{TCModal:m["a"],TCFormGroup:f["a"],TCDropdown:_["a"]},created:function(){this.getDepartment()},data:function(){return{UI:{title:null,title_create:"新增部門",title_update:"修改部門"},is_create:!1,department:"",user_group_id:"",isClickAll:!1,records:{},department_options:[],position_options:[],gender_options:[{name:"男",value:0},{name:"女",value:1}],default_location_options:[],locs:[{name:"貴賓廳1",value:1},{name:"貴賓廳2",value:2}],checkedLoc:[],checkedCount:0,user_id:""}},watch:{checkedLoc:function(t){var e=[];t.forEach((function(t,a){e[a]={name:v["a"].tc("sys_staff.loc_".concat(t)),value:t}})),this.default_location_options=e,this.records.permission_location_ids=t}},methods:{hide:function(){return this.record_init(),this.$refs.modal.hide()},submit:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!=this.records.name){t.next=3;break}return this.$message({top:1e3,showClose:!0,duration:5e3,message:"保存失敗，欄位不得為空",type:"error"}),t.abrupt("return");case 3:this.save();case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getDepartmentChange:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,SysUI.axios("GET",h.getPositionList,{user_department_id:t,page:1,limit:100}).then(function(){var a=Object(i["a"])(regeneratorRuntime.mark((function a(s){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(200!=(null===s||void 0===s?void 0:s.httpStatus)){a.next=9;break}return a.next=3,s.data.data;case 3:r=a.sent,r.forEach((function(t){t.value=t.user_position_id})),e.position_options=r,e.records.user_department_id=t,a.next=10;break;case 9:e.$message({top:1e3,showClose:!0,duration:5e3,message:s.message,type:"error"});case 10:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}());case 2:case"end":return a.stop()}}),a)})))()},selectAllLoc:function(t){this.checkedLoc=t?[1,2]:[]},save:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("this.records",this.records),t.next=3,SysUI.input_pin(!0);case 3:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:return this.is_create?(e=h.createUser,a="POST"):(e=h.updateUser,a="PUT",this.records.user_id=this.user_id),t.next=8,SysUI.axios(a,e,this.records).then(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(200!=(null===e||void 0===e?void 0:e.httpStatus)){t.next=7;break}return t.next=3,s.hide();case 3:return t.next=5,s.$parent.search();case 5:t.next=8;break;case 7:s.$message({top:1e3,showClose:!0,duration:5e3,message:e.message,type:"error"});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getDepartment:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,SysUI.axios("GET",h.getDepartmentList,{page:1,limit:100}).then(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(a){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.data.data;case 2:s=e.sent,s.forEach((function(t){t.value=t.department_id})),t.department_options=s;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})))()},refresh_record:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.user_id=this.is_create?"":e,t.next=3,SysUI.axios("GET",h.userDetail,{user_id:e}).then(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(200!=(null===e||void 0===e?void 0:e.httpStatus)){t.next=8;break}return a.records=e.data,a.checkedLoc=e.data.permission_location_ids.map((function(t){return parseInt(t)})),2==a.checkedLoc.length&&(a.isClickAll=!0),t.next=6,a.getDepartmentChange(e.data.user_department_id);case 6:t.next=9;break;case 8:a.records={};case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),record_init:function(){this.records={},this.checkedLoc=[],this.isClickAll=!1,this.department_options=[],this.position_options=[]},edit_record:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.record_init();case 2:return this.is_create=!1,this.UI.title=this.UI.title_update,t.next=6,this.refresh_record(e);case 6:return t.abrupt("return",this.show());case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),create_record:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.record_init();case 2:return this.is_create=!0,this.UI.title=this.UI.title_create,this.user_id="",t.next=7,this.refresh_record();case 7:return t.abrupt("return",this.show());case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),show:function(){return this.getDepartment(),this.$refs.modal.show()}}},b=g,C=a("2877"),y=Object(C["a"])(b,u,p,!1,null,null,null),w=y.exports,x=function(){return[{label:v["a"].tc("sys_position.permission_location"),key:"permission_location",scale:1},{label:v["a"].tc("sys_position.user_position_name"),key:"user_position_name",scale:1},{label:v["a"].tc("sys_position.staff_no"),key:"staff_no",scale:1},{label:v["a"].tc("sys_position.name"),key:"name",scale:1},{label:v["a"].tc("sys_position.id_no"),key:"id_no",scale:1},{label:v["a"].tc("sys_position.phone"),key:"phone",scale:1},{label:v["a"].tc("sys_position.default_location"),key:"default_location",scale:1},{label:v["a"].tc("sys_position.accountant"),key:"accountant",scale:1},{label:v["a"].tc("sys_position.account_manager"),key:"account_manager",scale:1},{label:v["a"].tc("sys_position.manager"),key:"manager",scale:1},{label:v["a"].tc("sys_position.general_manager"),key:"general_manager",scale:1},{label:v["a"].tc("sys_position.last_login_time"),key:"last_login_time",scale:1}]},k=x,F={getStaffList:"".concat("http://dev-tc-laravel.vc-technology.com","/api/system-management/user/list"),getPositionList:"".concat("http://dev-tc-laravel.vc-technology.com","/api/system-management/position/list")},T={name:"assistant",components:{FilterInputField:l["a"],FilterDateFiled:c["a"],FilterSelectField:d["a"],EditForm:w},data:function(){return{selected_index:[],fields:[],list:[],filters:{page:1,limit:20},Position:[],hidden_fields:[],operation_width:"100px",position_option:[],locs:[{name:"",value:null},{name:"貴賓廳1",value:1},{name:"貴賓廳2",value:2}],permissions:[]}},created:function(){this.getColumns(),this.getPositions(),this.permissions=getModulePermissions(),console.log("this.permissions",this.permissions)},computed:{get_operation_col_style:function(){return{width:this.operation_width}},filter_fields:function(){var t=this,e=this.fields,a=[];return e.forEach((function(e){t.hidden_fields.includes(e.key)||(a=[].concat(Object(n["a"])(a),[e]))})),a}},methods:{pageSearch:function(t){this.filters=Object(o["a"])(Object(o["a"])({},this.filters),t),this.search()},getColumns:function(){this.fields=k()},getPositions:function(){var t=this;SysUI.axios("GET",F.getPositionList,{page:1,limit:100}).then((function(e){console.log("params",e);var a=e.data.data;a.forEach((function(t){t.value=t.user_position_id})),t.position_option=[{name:null,value:null}].concat(Object(n["a"])(a))}))},getHiddenFields:function(t){this.hidden_fields=t},search:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,SysUI.input_pin(!0);case 2:if(t.sent){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,SysUI.axios("GET",F.getStaffList,this.filters).then((function(t){e.list=t.data.data,e.$refs.page.setDataFromAPI(t.data.pagination),e.selected_index=[]}));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),sync_thead_scroll:function(){$(this.$refs.thead).scrollLeft($(this.$refs.tbody).scrollLeft())},select_display_fields:function(){this.$refs.displayColumn.show()},handle_acitve_tr:function(t){-1==this.selected_index.indexOf(t)?this.selected_index.push(t):this.selected_index.splice(this.selected_index.indexOf(t),1)},createStaff:function(){this.$refs.editForm.create_record()},edit:function(t){this.$refs.editForm.edit_record(t)}}},S=T,G=Object(C["a"])(S,s,r,!1,null,null,null);e["default"]=G.exports},"97c0":function(t,e,a){"use strict";a("e31f")},e31f:function(t,e,a){}}]);
//# sourceMappingURL=chunk-2022d620.58986e62.js.map
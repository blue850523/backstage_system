(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-01afbcdd"],{1746:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.size},[a("div",{staticClass:"form-group row nopadding"},[a("div",{staticClass:"nopadding",class:t.label_size},[a("div",{staticClass:"filter-title"},[a("label",{staticClass:"control-label",attrs:{for:t.id}},[t._v(t._s(t.label))])])]),a("div",{staticClass:"nopadding",class:t.input_size},[a("DatePicker",{attrs:{type:t.type,name:t.name,id:t.id,"value-type":"format",placeholder:t.label},on:{input:function(e){return t.input()}},model:{value:t.dateVal,callback:function(e){t.dateVal=e},expression:"dateVal"}})],1)])])},s=[],i={name:"filter_input_field",data:function(){return{dateVal:""}},props:{label:{type:String,default:"請傳入label"},name:{type:String,default:"請傳入name"},id:{type:String,default:""},size:{type:String,default:"col-md-3"},label_size:{type:String,default:"col-5"},input_size:{type:String,default:"col-5"},type:{type:String,default:"date"},value:{type:String,default:""}},methods:{input:function(){this.$emit("input",this.dateVal)}}},r=i,l=a("2877"),c=Object(l["a"])(r,n,s,!1,null,null,null);e["a"]=c.exports},"38f5":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group",class:t.get_classes()},[t.label&&t.label.length?a("label",{staticClass:"control-label",class:t.get_label_class(),staticStyle:{"":":before"},on:{click:function(e){t.clickable_label&&t.$emit("label-click")}}},[t._v(" "+t._s(t.label)+" ")]):t._e(),t._t("default")],2)},s=[],i={name:"tc_form_group",props:{hasError:{type:Boolean,default:!1},required:{type:Boolean,default:!1},grid_col_md_2:{type:Boolean,default:!1},label:{type:String,default:""},clickable_label:{type:Boolean,default:!1}},methods:{get_classes:function(){return{"has-error":this.hasError,"has-custom-error":this.hasError,required:this.required,"grid-col-md-2":this.grid_col_md_2,"not-required":!this.required}},get_label_class:function(){return{"as-link":this.clickable_label}}}},r=i,l=(a("97c0"),a("2877")),c=Object(l["a"])(r,n,s,!1,null,null,null);e["a"]=c.exports},"3ea2":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.size},[a("div",{staticClass:"form-group row nopadding"},[a("div",{staticClass:"nopadding",class:t.label_size},[a("div",{staticClass:"filter-title"},[a("label",{staticClass:"control-label",attrs:{for:t.id}},[t._v(t._s(t.label))])])]),a("div",{staticClass:"nopadding",class:t.input_size},[a("input",{staticClass:"form-control",attrs:{type:t.type,name:t.name,placeholder:t.label,maxlength:t.maxlength,id:t.id},domProps:{value:t.value},on:{input:function(e){return t.input(e)}}})])])])},s=[],i=(a("ac1f"),a("466d"),a("5319"),{name:"filter_input_field",props:{label:{type:String,default:"請傳入label"},name:{type:String,default:"請傳入name"},id:{type:String,default:""},size:{type:String,default:"col-3"},label_size:{type:String,default:"col-5"},input_size:{type:String,default:"col-5"},type:{type:String,default:"text"},value:{type:String,default:""},maxlength:{type:String,default:""},only_number:{type:Boolean,default:!1},only_big_en_and_number:{type:Boolean,default:!1}},methods:{input:function(t){if(this.only_number){var e=t.target.value,a=e.match(/[\d]+/g);$(t.target).val(a?a[0]:"")}else if(this.only_big_en){var n=t.target.value;$(t.target).val(n.replace(/[^\w\/]/gi,"").toUpperCase())}this.$emit("input",t.target.value)}}}),r=i,l=a("2877"),c=Object(l["a"])(r,n,s,!1,null,null,null);e["a"]=c.exports},4264:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.size},[a("div",{staticClass:"form-group row nopadding"},[a("div",{staticClass:"nopadding",class:t.label_size},[a("div",{staticClass:"filter-title"},[a("label",{staticClass:"control-label",attrs:{for:t.id}},[t._v(t._s(t.label))])])]),a("div",{staticClass:"nopadding",class:t.input_size},[a("select",{staticClass:"form-select",attrs:{id:t.id,name:t.name},on:{change:function(e){return t.$emit("input",e.target.value)}}},t._l(t.options,(function(e,n){return a("option",{key:n,domProps:{value:e.value}},[t._v(" "+t._s(e.option||e.name||e.text)+" ")])})),0)])])])},s=[],i={name:"filter_select_field",props:{label:{type:String,default:"請傳入Label"},name:{type:String,default:"請傳入Name"},id:{type:String,default:"id"+void 0},options:{type:Array,default:[{value:0,option:"test"}]},size:{type:String,default:"col-3"},label_size:{type:String,default:"col-5"},input_size:{type:String,default:"col-5"}}},r=i,l=a("2877"),c=Object(l["a"])(r,n,s,!1,null,null,null);e["a"]=c.exports},"5fec":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"modal",staticClass:"modal fade",attrs:{"data-bs-backdrop":"false","data-bs-keyboard":"false",tabindex:"-1"}},[a("div",{staticClass:"modal-dialog modal-lg",style:t.get_dialog_style()},[a("div",{staticClass:"modal-content watermark-container"},[a("WaterMarker"),a("div",{staticClass:"modal-header"},[t._t("header",(function(){return[a("span",{staticClass:"modal-title"},[t._v(" "+t._s(t.title)+" ")])]}))],2),a("div",{ref:"modal_body",staticClass:"modal-body",style:t.get_modal_body_style()},[a("input",{staticStyle:{display:"none"}}),a("input",{staticStyle:{display:"none"},attrs:{type:"password"}}),t._t("body")],2),a("div",{staticClass:"modal-footer"},[t._t("footer",(function(){return[a("button",{staticClass:"btn btn-new4",on:{click:function(e){return t.hide()}}},[t._v(" 離開 ")])]}))],2)],1)]),t._t("default")],2)},s=[],i=(a("d3b7"),a("a847")),r={name:"tc-modal",components:{WaterMarker:i["a"]},data:function(){return{p_resolve:null}},model:{prop:"value",event:"change"},props:{title:{type:String,default:"未獲取Tittle"},dialogStyle:Object,modalBodyStyle:Object,body_min_height:{type:String,default:"680px"},dialog_width:{type:String,default:"1600px"}},created:function(){},computed:{},methods:{get_dialog_style:function(){return Object.assign({"max-width":this.dialog_width},this.dialogStyle)},get_modal_body_style:function(){return Object.assign({"min-height":this.body_min_height,"max-height":"680px"},this.modalBodyStyle)},show:function(){var t=this,e=$(this.$refs.modal);return e.modal("show"),SysUI.set_backdrop(e,!0),$(this.$refs.modal_body).scrollTop(0),new Promise((function(e){return t.p_resolve=e}))},hide:function(t){$(this.$refs.modal).modal("hide"),this.p_resolve(t)}}},l=r,c=a("2877"),o=Object(c["a"])(l,n,s,!1,null,null,null);e["a"]=o.exports},"97c0":function(t,e,a){"use strict";a("e31f")},d4d1:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"accmanage"},[a("div",{staticClass:"vc-panel",attrs:{id:"main-panel"}},[a("div",{staticClass:"vc-panel-heading"},[a("span",{staticClass:"vc-panel-title"},[t._v("部門管理")]),a("div",{staticClass:"pull-right"},[a("button",{staticClass:"btn btn-new",attrs:{id:"AccManagement_AccManage_Btn_CreateAcc"},on:{click:t.addDepartment}},[t._v(" 新增部門 ")])])]),a("div",{staticClass:"vc-panel-body"},[a("form",{staticClass:"vc-panel-body-search watermark-container",attrs:{id:"search-panel"}},[a("WaterMark"),a("div",{staticClass:"subTitle",staticStyle:{"justify-content":"space-between"}},[t._v(" 選擇搜尋條件 ")]),a("div",{staticClass:"\n                        vc-panel-body-search-row\n                        row row-cols-4\n                        gx-0\n                        gy-1\n                    "},[a("FilterInputField",{attrs:{label:t.$t("sys_department.name"),name:"filter_name",id:"id_name"},model:{value:t.filters.name,callback:function(e){t.$set(t.filters,"name",e)},expression:"filters.name"}})],1),a("div",{staticClass:"vc-panel-body-search-row row g-0"},[a("div",{staticClass:"col text-end"},[a("button",{staticClass:"btn btn-primary",staticStyle:{"margin-right":"4px"},attrs:{type:"button"},on:{click:function(e){return t.search()}}},[t._v(" 搜尋 ")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"reset"}},[t._v(" 重置 ")])])])],1),a("div",{staticClass:"vc-panel-body-list",attrs:{id:"list-panel"}},[a("div",{staticClass:"subTitle",staticStyle:{"justify-content":"space-between"}},[t._v(" 檢視搜尋結果 "),a("div",{staticClass:"text-end"},[a("button",{staticClass:"btn btn-new5",staticStyle:{"margin-left":"4px"},on:{click:t.select_display_fields}},[t._v(" 篩選顯示 ")]),a("button",{staticClass:"btn btn-new2",staticStyle:{"margin-left":"4px"}},[t._v(" 列印 ")]),a("button",{staticClass:"btn btn-new3",staticStyle:{"margin-left":"4px"},on:{click:t.export_excel}},[t._v(" 匯出EXCEL ")])])]),a("div",{staticClass:"vc-panel-body-list-table"},[a("div",{staticClass:"table-container watermark-container"},[a("WaterMark"),a("div",{ref:"thead",staticClass:"table-responsive nopadding thead"},[a("table",{staticClass:"table table-bordered"},[a("thead",[a("tr",{staticClass:"table-title-bar"},[a("th",{staticClass:"\n                                                text-center\n                                                field-scale-1\n                                            "},[t._v(" 操作 ")]),t._l(t.filter_fields,(function(e){return a("th",{key:e.key,staticClass:"text-center",class:"field-scale-"+e.scale},[t._v(" "+t._s(e.label)+" ")])}))],2)])])]),a("div",{ref:"tbody",staticClass:"table-responsive nopadding tbody",on:{scroll:function(e){return t.sync_thead_scroll()}}},[a("table",{staticClass:"table table-bordered table-hover"},[a("tbody",t._l(t.list,(function(e,n){return a("tr",{key:n,class:{selectedTr:t.selected_index.includes(n)},on:{click:function(e){return t.handle_acitve_tr(n)}}},[a("td",{staticClass:"\n                                                text-center\n                                                field-scale-1\n                                            "},[a("button",{staticClass:"btn btn-w btn-mr4",attrs:{type:"button"},on:{click:function(a){return t.edit(e)}}},[t._v(" 修改 ")])]),t._l(t.filter_fields,(function(n){return a("td",{key:n.key,staticClass:"text-left",class:"field-scale-"+n.scale},[t._v(" "+t._s(e[n.key])+" ")])}))],2)})),0)])])],1)])])]),a("Pagination",{ref:"page",on:{searchService:t.pageSearch}})],1),a("div",[a("DisplayColumn",{ref:"displayColumn",attrs:{fields:t.fields},on:{hidden_fields:t.getHiddenFields}}),a("EditForm",{ref:"editForm"})],1)])},s=[],i=a("1da1"),r=a("5530"),l=a("2909"),c=(a("96cf"),a("d3b7"),a("159b"),a("caad"),a("2532"),a("99af"),a("ac1f"),a("841c"),a("a434"),a("3ea2")),o=a("1746"),d=a("4264"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("TCModal",{ref:"modal",attrs:{id:"edit_form",title:t.UI.title,body_min_height:"fit-content",dialog_width:"600px"},scopedSlots:t._u([{key:"body",fn:function(){return[a("div",{staticClass:"align-items-center row"},[a("TCFormGroup",{staticClass:"col-2",attrs:{label:"部門",required:""}}),a("TCFormGroup",{staticClass:"col-10",attrs:{required:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.records.name,expression:"records.name"}],staticClass:"form-control",domProps:{value:t.records.name},on:{input:function(e){e.target.composing||t.$set(t.records,"name",e.target.value)}}})])],1)]},proxy:!0},{key:"footer",fn:function(){return[a("button",{staticClass:"btn btn-new4",attrs:{type:"button"},on:{click:function(e){return t.submit()}}},[t._v(" 保存 ")]),a("button",{staticClass:"btn btn-new4",attrs:{type:"button"},on:{click:function(e){return t.hide(0)}}},[t._v(" 離開 ")])]},proxy:!0}])})],1)},p=[],f=(a("b0c0"),a("e9c4"),a("5fec")),m=a("38f5"),h={addDepartment:"".concat("http://dev-tc-laravel.vc-technology.com","/api/system-management/department/create"),updateDepartment:"".concat("http://dev-tc-laravel.vc-technology.com","/api/system-management/department/update")},_={name:"edit_form",components:{TCModal:f["a"],TCFormGroup:m["a"]},mounted:function(){},data:function(){return{UI:{title:null,title_create:"新增部門",title_update:"修改部門"},is_create:!1,department:"",user_group_id:"",records:{name:null,department_id:null}}},methods:{hide:function(){return this.record_init(),this.$refs.modal.hide()},submit:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!=this.records.name){t.next=3;break}return this.$message({top:1e3,showClose:!0,duration:5e3,message:"保存失敗，欄位不得為空",type:"error"}),t.abrupt("return");case 3:this.save();case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),save:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,SysUI.input_pin(!0);case 2:if(t.sent){t.next=4;break}return t.abrupt("return");case 4:return e=this.is_create?h.addDepartment:h.updateDepartment,a=this.is_create?"POST":"PUT",t.next=8,SysUI.axios(a,e,this.records).then(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(200!=e.httpStatus){t.next=7;break}return t.next=3,n.hide();case 3:return t.next=5,n.$parent.search();case 5:t.next=8;break;case 7:n.$message({top:1e3,showClose:!0,duration:5e3,message:e.message,type:"error"});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),record_init:function(){this.records={name:null,department_id:null}},edit_record:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=JSON.parse(JSON.stringify(e)),this.records=null,this.is_create=!1,this.UI.title=this.UI.title_update,this.records=a,t.abrupt("return",this.show());case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),create_record:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.record=null,this.is_create=!0,this.UI.title=this.UI.title_create,this.user_group_id="",t.abrupt("return",this.show());case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),show:function(){return this.$refs.modal.show()}}},b=_,v=a("2877"),g=Object(v["a"])(b,u,p,!1,null,null,null),y=g.exports,C=a("9801"),x=function(){return[{label:C["a"].tc("sys_department.name"),key:"name",scale:1},{label:C["a"].tc("sys_department.created_at"),key:"created_at",scale:1},{label:C["a"].tc("sys_department.updated_at"),key:"updated_at",scale:1}]},w=x,k={getDepartmentList:"".concat("http://dev-tc-laravel.vc-technology.com","/api/system-management/department/list"),addDepartment:"".concat("http://dev-tc-laravel.vc-technology.com","/api/system-management/department/create"),exportExcel:"".concat("http://dev-tc-laravel.vc-technology.com","/api/system-management/department/export-excel")},S={name:"assistant",components:{FilterInputField:c["a"],FilterDateFiled:o["a"],FilterSelectField:d["a"],EditForm:y},data:function(){return{selected_index:[],fields:[],list:[],filters:{name:"",page:1,limit:20},Position:[],hidden_fields:[],operation_width:"100px",permissions:[]}},created:function(){this.getColumns(),this.permissions=getModulePermissions(),console.log("this.permissions",this.permissions)},computed:{get_operation_col_style:function(){return{width:this.operation_width}},filter_fields:function(){var t=this,e=this.fields,a=[];return e.forEach((function(e){t.hidden_fields.includes(e.key)||(a=[].concat(Object(l["a"])(a),[e]))})),a}},methods:{receiveMsg:function(t){console.log("handleMessageEvent",t)},pageSearch:function(t){this.filters=Object(r["a"])(Object(r["a"])({},this.filters),t),this.search()},getColumns:function(){this.fields=w()},getHiddenFields:function(t){this.hidden_fields=t},search:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,SysUI.input_pin(!0);case 2:if(t.sent){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,SysUI.axios("GET",k.getDepartmentList,this.filters).then((function(t){e.list=t.data.data,e.$refs.page.setDataFromAPI(t.data.pagination),e.selected_index=[]}));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),sync_thead_scroll:function(){$(this.$refs.thead).scrollLeft($(this.$refs.tbody).scrollLeft())},select_display_fields:function(){this.$refs.displayColumn.show()},export_excel:function(){return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,SysUI.input_pin(!0);case 2:if(t.sent){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,SysUI.axios("GET",k.exportExcel,{}).then((function(t){console.log("params",t)}));case 6:case"end":return t.stop()}}),t)})))()},handle_acitve_tr:function(t){-1==this.selected_index.indexOf(t)?this.selected_index.push(t):this.selected_index.splice(this.selected_index.indexOf(t),1)},addDepartment:function(){this.$refs.editForm.create_record()},edit:function(t){this.$refs.editForm.edit_record(t)}}},O=S,j=Object(v["a"])(O,n,s,!1,null,null,null);e["default"]=j.exports},e31f:function(t,e,a){}}]);
//# sourceMappingURL=chunk-01afbcdd.a20815f1.js.map